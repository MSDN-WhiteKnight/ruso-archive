---
title: "Обратиться к макроопределениям GET_X_LPARAM и GET_Y_LPARAM"
---
<p><i><a href="https://github.com/MSDN-WhiteKnight/ruso-archive/">RuSO Archive</a></i></p>
<h1>Обратиться к макроопределениям GET_X_LPARAM и GET_Y_LPARAM</h1>
<p><a href="https://ru.stackoverflow.com/questions/769516/%d0%9e%d0%b1%d1%80%d0%b0%d1%82%d0%b8%d1%82%d1%8c%d1%81%d1%8f-%d0%ba-%d0%bc%d0%b0%d0%ba%d1%80%d0%be%d0%be%d0%bf%d1%80%d0%b5%d0%b4%d0%b5%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f%d0%bc-get-x-lparam-%d0%b8-get-y-lparam">Source</a> - by <a href="https://ru.stackoverflow.com/users/206435/%e3%83%92%e3%83%9f%e3%82%b3">ヒミコ</a></p>
<blockquote>
<p>В виду необходимости, нет смысла передавать в метод оба параметра, а так же выделять динамическую память под <code>POINTS</code> во время обработки сообщения <code>WM_MOUSEMOVE</code>, <code>WM_LBUTTONDOWN</code>, и т.д. Приходится использовать <code>MAKEPOINTS(lparam)</code>, что способствует созданию объекта который на самом деле и не нужен, при этом макроопределения <code>GET_X_LPARAM</code> и <code>GET_Y_LPARAM</code> не работают. Но на сайте <code>MSDN</code> есть информация что если работать именно с данными макроопределениями, можно получить неверные данные если у пользователя несколько мониторов. Как обойтись без данных макроопределений, когда подключать заголовок <code>windowsx.h</code> не имеет смысла ради 2х макроопределений.</p>

</blockquote>
<h2>Answer 773870</h2>
<p><a href="https://ru.stackoverflow.com/a/773870/">Source</a> - by <a href="https://ru.stackoverflow.com/users/240512/msdn-whiteknight">MSDN.WhiteKnight</a></p>
<blockquote>
<p>Макроопределения <code>GET_X_LPARAM</code> и <code>GET_Y_LPARAM</code>, несомненно, работают и возвращают корректные значения независимо от количества мониторов. Если вы нашли где-то в документации указания, что это не так, возможно это ошибка. Они определены в заголовочном файле так:</p>

<pre><code>#define GET_X_LPARAM(lp) ((int)(short)LOWORD(lp))
#define GET_Y_LPARAM(lp) ((int)(short)HIWORD(lp))
</code></pre>

<p>Как видно, тип возвращаемого значения - int (знаковый), поэтому отрицательные координаты будут корректно обрабатываются.</p>

<blockquote>
  <p>Как обойтись без данных макроопределений, когда подключать заголовок
  windowsx.h не имеет смысла ради 2х макроопределений.</p>
</blockquote>

<p>Если вам нужны только какие-то отдельные определения из заголовочного файла, их можно просто скопировать к себе в код. Эффект будет тот же.  </p>

</blockquote>
<hr/>
<p><i>Content is retrieved from StackExchange API. </i></p>
<p><i>Auto-generated by ruso-archive tools. </i></p>
