---
title: "Есть ли возможность разрыва таблицы DataGrid WPF для разделения её на несколько таблиц"
---
<p><i><a href="https://github.com/MSDN-WhiteKnight/ruso-archive/">RuSO Archive</a></i></p>
<h1>Есть ли возможность разрыва таблицы DataGrid WPF для разделения её на несколько таблиц</h1>
<p><a href="https://ru.stackoverflow.com/questions/960759/%d0%95%d1%81%d1%82%d1%8c-%d0%bb%d0%b8-%d0%b2%d0%be%d0%b7%d0%bc%d0%be%d0%b6%d0%bd%d0%be%d1%81%d1%82%d1%8c-%d1%80%d0%b0%d0%b7%d1%80%d1%8b%d0%b2%d0%b0-%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d1%8b-datagrid-wpf-%d0%b4%d0%bb%d1%8f-%d1%80%d0%b0%d0%b7%d0%b4%d0%b5%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b5%d1%91-%d0%bd%d0%b0-%d0%bd%d0%b5%d1%81%d0%ba%d0%be%d0%bb%d1%8c%d0%ba%d0%be">Source</a> - by <a href="https://ru.stackoverflow.com/users/235788/maks">Maks</a></p>
<blockquote>
<p>Имеется потоковый документ FlowDocument, содержащий в себе контейнер InlineUIContainer с таблицей DataGrid. Длина таблицы DataGrid превышает установленный фиксированный размер flowDocument в FlowDocumentPageViewer, и следовательно появляется вертикальный ScrollBar у таблицы и часть таблицы не переходит на следующую страницу.
<br><br> Проблема в том, что таблица должна печататься из flowDocument полностью, на несколько страниц, а печатается только её видимая часть на одну страницу... у Paragraph, DataGrid и у InlineUIContainer ставил невозможность прокручивать содержимое через свойство ScrollViewer.CanContentScroll="False" - полоса прокрутки не пропадает.</p>

<pre><code>&lt;FlowDocumentPageViewer Name="fdpvDocumentViewer" Margin="10,10,10,52" Background="#FFF0E9E8"&gt;
        &lt;FlowDocument Name="fdPage" PageHeight="1123" PageWidth="794" Background="White" PagePadding="30,30,10,30" ColumnWidth="1000" FontFamily="Times New Roman"&gt;
            &lt;Paragraph ScrollViewer.CanContentScroll="False"&gt;
                &lt;InlineUIContainer ScrollViewer.CanContentScroll="False"&gt;
                    &lt;DataGrid x:Name="dgDeviceList" Width="740" RowDetailsVisibilityMode="Collapsed" CanUserAddRows="False"  RowHeaderWidth ="0" ColumnWidth="*" ScrollViewer.CanContentScroll="False" AutoGenerateColumns="False"  CanUserSortColumns="False" CanUserReorderColumns="False" CanUserResizeColumns="False" EnableRowVirtualization="False" UseLayoutRounding="False"&gt;
                        &lt;DataGrid.Columns&gt;
                            ...Столбцы с привязкой данных...
                        &lt;/DataGrid.Columns&gt;
                    &lt;/DataGrid&gt;
                &lt;/InlineUIContainer&gt;
            &lt;/Paragraph&gt;
         ....
</code></pre>

<p>Может у кого будут другие предложения реализации вывода таблицы DataGrid на несколько страницах FlowDocumentPageViewer. Может обернуть таблицу ещё в какой контейнер?</p>

</blockquote>
<h2>Answer 961554</h2>
<p><a href="https://ru.stackoverflow.com/a/961554/">Source</a> - by <a href="https://ru.stackoverflow.com/users/240512/msdn-whiteknight">MSDN.WhiteKnight</a></p>
<blockquote>
<p>Полоса прокрутки появляется, потому что высоты элемента не хватает для отображения всех строк. Избавиться от нее легко, установив очень большую высоту для DataGrid, но что толку? FlowDocument не поддерживает постраничный вывод отдельного InlineUIContainer (как и BlockUIContainer). Может и можно изобрести какой-то костыльный класс, который будет резать DataGrid на отдельные Bitmap по размеру страницы и отдавать их отдельными UIElement, но нужно ли оно? Качество изображения будет явно не на высоте.</p>

<p>Лучше использовать класс <a href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/table-overview" rel="nofollow noreferrer">Table</a>, который поддерживает постраничный вывод внутри FlowDocument. Как-то так:</p>

<pre><code>using System.Data;
using System.Windows.Documents;

public static Table CreateTable(DataTable dt)
{
    Table t = new Table();
    TableCell cell;
    TableRow trow;
    var rows = new TableRowGroup();
    t.RowGroups.Add(rows);

    //параметры таблицы
    t.BorderBrush = Brushes.Black;
    t.BorderThickness = new Thickness(1);
    t.CellSpacing = 0;            

    //заголовки столбцов
    trow = new TableRow();
    foreach (DataColumn col in dt.Columns)
    {
        t.Columns.Add(new TableColumn());
        cell = new TableCell(new Paragraph(new Run(col.Caption)));
        cell.BorderBrush = Brushes.Black;
        cell.BorderThickness = new Thickness(1);
        trow.Cells.Add(cell);
    }
    rows.Rows.Add(trow);

    //строки
    foreach (DataRow r in dt.Rows)
    {
        trow = new TableRow();
        foreach (DataColumn col in dt.Columns)
        {
            cell = new TableCell(new Paragraph(new Run(r[col].ToString())));
            cell.BorderBrush = Brushes.Black;
            cell.BorderThickness = new Thickness(1);
            trow.Cells.Add(cell);
        }
        rows.Rows.Add(trow);
    }
    return t;
}

private void Button_Click(object sender, RoutedEventArgs e)
{
    //создадим DataTable с тестовыми данными
    DataTable dt = new DataTable();
    dt.Columns.Add(new DataColumn("X"));
    dt.Columns.Add(new DataColumn("Y"));

    for (int i = 0; i &lt; 100; i++)
    {
        var row = dt.NewRow();
        row[0] = i;
        row[1] = Math.Round(Math.Sin(i*0.1),2);
        dt.Rows.Add(row);
    }

    //создадим таблицу на основе DataTable
    Table t = CreateTable(dt);

    //создадим документ
    FlowDocument fd= new FlowDocument(t);
    fdpvDocumentViewer.Document = fd;

}
</code></pre>

</blockquote>
<h2>Answer 964503</h2>
<p><a href="https://ru.stackoverflow.com/a/964503/">Source</a> - by <a href="https://ru.stackoverflow.com/users/235788/maks">Maks</a></p>
<blockquote>
<p>Для удобства работы при формировании потоковых документов нашёл одну свободную библиотеку, называется <a href="https://github.com/jogibear9988/CodeReason.Reports" rel="nofollow noreferrer">CodeReason.Reports</a> Удобно выводить данные в таблицы и формировать другие различные отчёты с графиками, диаграммами и т.д. </p>

</blockquote>
<hr/>
<p><i>Content is retrieved from StackExchange API. </i></p>
<p><i>Auto-generated by ruso-archive tools. </i></p>
