{"owner":{"reputation":16058,"user_id":240512,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ew6lG.png?s=128&g=1","display_name":"MSDN.WhiteKnight","link":"https://ru.stackoverflow.com/users/240512/msdn-whiteknight"},"is_accepted":true,"score":2,"last_activity_date":1547997554,"creation_date":1547997554,"answer_id":934445,"question_id":932906,"body":"<p>Как-то так:</p>\n\n<pre><code>typedef LRESULT (CALLBACK * PWNDPROC ) (HWND, UINT, WPARAM, LPARAM); \nPWNDPROC RichEditOldWndProc = NULL; //указатель на стандартную WNDPROC элемента Rich Edit\n\nLRESULT CALLBACK RichEditNewWndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) //переопределенный WNDPROC для Rich Edit\n{   \n    CHARRANGE cr;\n    int line;\n\n    switch (message)\n    {\n    case WM_KEYDOWN:\n        switch (wParam){\n        case VK_UP:\n\n            //получаем текущую позицию курсора \n            ZeroMemory(&amp;cr,sizeof(cr));\n            SendMessage(hWnd, EM_EXGETSEL, 0, (LPARAM)&amp;cr);\n\n            //находим, на какой строке находится курсор\n            line = SendMessage(hWnd, EM_EXLINEFROMCHAR, 0, cr.cpMin);\n\n            //если курсор на первой строке, не передаем управление стандартной WNDPROC\n            if(line == 0) return 0;\n            break;                      \n        }\n        break;  \n\n        //аналогично для случаев вниз/вправо/влево...\n\n    }\n\n    //передаем управление стандартной WNDPROC...\n    return RichEditOldWndProc(hWnd,message,wParam,lParam);\n}\n\n\nvoid InitRichEdit()\n{  \n   LoadLibrary(TEXT(\"Msftedit.dll\"));\n\n   HWND hwndEdit= CreateWindowEx(0, MSFTEDIT_CLASS, TEXT(\"\"),\n    ES_MULTILINE | WS_VISIBLE | WS_CHILD | WS_BORDER | WS_TABSTOP, \n    x, y, width, height, \n    hWnd, NULL, hInst, NULL);\n\n   //сохраняем указатель на стандартную WNDPROC\n   RichEditOldWndProc = (PWNDPROC) GetWindowLongPtr(hwndEdit, GWLP_WNDPROC);\n\n   //переопределяем WNDPROC\n   SetWindowLongPtr(hwndEdit, GWLP_WNDPROC, (LONG_PTR)RichEditNewWndProc);\n}\n</code></pre>\n"}