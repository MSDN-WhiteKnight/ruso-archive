---
title: "Answer 970291"
se.owner.user_id: 10953
se.owner.display_name: "Raider"
se.owner.link: "https://ru.stackoverflow.com/users/10953/raider"
se.answer_id: 970291
se.question_id: 969540
se.post_type: answer
se.score: 0
se.is_accepted: True
---
<p>Вместо вот этих строчек:</p>

<pre><code>while (form.trigger_status == "start")
{
    Thread.Sleep(1000);
}
form.myThread.Abort();
form.myThread.Join();
</code></pre>

<p>напишите следующее:</p>

<pre><code>while (form.myThread.IsAlive)
{
    Application.DoEvents();
}
</code></pre>

<p>таким образом мы дожидаемся завершения потока, не блокируя при этом UI (за это отвечает <code>Application.DoEvents</code>). Помимо этого, советую полю <code>trigger</code> выставить модификатор <code>volatile</code> – так следует делать для всех полей, к которым обращаются несколько потоков одновременно.</p>

<p>А вообще, советую посмотреть в сторону асинхронного программирования с помощью async/await.</p>
