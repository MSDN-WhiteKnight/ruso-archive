---
title: "Answer 977715"
se.owner.user_id: 261244
se.owner.display_name: "Yaroslav"
se.owner.link: "https://ru.stackoverflow.com/users/261244/yaroslav"
se.answer_id: 977715
se.question_id: 977595
se.post_type: answer
se.score: 1
se.is_accepted: False
---
<p>В дополнение к первому ответу @Zergatul</p>

<p>Код на С#</p>

<pre><code>class Program
{
    static void Main(string[] args)
    {
        Double x = 10;
        Double y = 0;
        y = GetFrexp(x, out Int32 n);

        Console.WriteLine($"{y.ToString("R")} = frexp({x}, 2^{n})");
        Console.ReadKey();
    }

    public static Double GetFrexp(Double value, out Int32 exponent)
    {
        return Frexp(value, out exponent);
    }

    [DllImport("Math.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl)]
    private extern static Double Frexp([MarshalAs(UnmanagedType.R8)] Double value, 
                                       [MarshalAs(UnmanagedType.I4)] out Int32 exponent);
}
</code></pre>

<p>Код на C++</p>

<p>MathLibrary.h</p>

<pre><code>#ifdef MATHLIBRARY_EXPORTS
#define MATHLIBRARY_API __declspec(dllexport)
#else
#define MATHLIBRARY_API __declspec(dllimport)
#endif

#include &lt;string&gt;
#include &lt;math.h&gt;
#include &lt;stdio.h&gt;

namespace MathFunc
{
    extern "C" MATHLIBRARY_API double Frexp(double x, int* expptr);
}
</code></pre>

<p>MathLibrary.cpp</p>

<pre><code>#include "pch.h"
#include &lt;math.h&gt;
#include &lt;stdio.h&gt;
#include "MathLibrary.h"
#include &lt;stdexcept&gt;

using namespace std;

namespace MathFunc
{
    double Frexp(double x, int* expptr)
    {
         return frexp(x, expptr);
    }
}
</code></pre>

<p>Инструкция по созданию dll: <a href="https://docs.microsoft.com/en-us/cpp/build/walkthrough-creating-and-using-a-dynamic-link-library-cpp?view=vs-2019" rel="nofollow noreferrer">Пошаговое руководство. Создание и использование собственной библиотеки динамических ссылок (C++)</a></p>
