---
title: "Неясное поведение атрибута OptionalAttribute"
se.owner.user_id: 206435
se.owner.display_name: "ヒミコ"
se.owner.link: "https://ru.stackoverflow.com/users/206435/%e3%83%92%e3%83%9f%e3%82%b3"
se.link: "https://ru.stackoverflow.com/questions/916459/%d0%9d%d0%b5%d1%8f%d1%81%d0%bd%d0%be%d0%b5-%d0%bf%d0%be%d0%b2%d0%b5%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b0-optionalattribute"
se.question_id: 916459
se.post_type: question
se.score: 2
---
<p>Для начала приведу простой пример кода:</p>

<pre><code>int CopyFromBitmap
(
#if UNI
    [In, Optional] Point2U *destPoint,
    [In, MarshalAs(UnmanagedType.IUnknown)] object bitmapObject,
    [In, Optional] RectU *srcRect
#else
    [In, Optional] ref Point2U destPoint,
    [In, MarshalAs(UnmanagedType.IUnknown)] object bitmapObject,
    [In, Optional] ref RectU srcRect
#endif
);
</code></pre>

<p>Каким образом необязательный параметр, идет перед обязательным но, при этом ничего не сообщается, ни ошибок, ни предупреждений.</p>

<p>Выходной код выглядит так:</p>

<p><a href="https://i.stack.imgur.com/aCYCy.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/aCYCy.png" alt="Странное определение"></a></p>

<p>Как такое вообще возможно?</p>
