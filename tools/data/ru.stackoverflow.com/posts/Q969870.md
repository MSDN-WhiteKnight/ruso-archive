---
title: "Определить размер файла, требуемый для сохранения списка объектов"
se.owner.user_id: 322215
se.owner.display_name: "damn"
se.owner.link: "https://ru.stackoverflow.com/users/322215/damn"
se.link: "https://ru.stackoverflow.com/questions/969870/%d0%9e%d0%bf%d1%80%d0%b5%d0%b4%d0%b5%d0%bb%d0%b8%d1%82%d1%8c-%d1%80%d0%b0%d0%b7%d0%bc%d0%b5%d1%80-%d1%84%d0%b0%d0%b9%d0%bb%d0%b0-%d1%82%d1%80%d0%b5%d0%b1%d1%83%d0%b5%d0%bc%d1%8b%d0%b9-%d0%b4%d0%bb%d1%8f-%d1%81%d0%be%d1%85%d1%80%d0%b0%d0%bd%d0%b5%d0%bd%d0%b8%d1%8f-%d1%81%d0%bf%d0%b8%d1%81%d0%ba%d0%b0-%d0%be%d0%b1%d1%8a%d0%b5%d0%ba%d1%82%d0%be%d0%b2"
se.question_id: 969870
se.post_type: question
se.score: 1
---
<p>Есть список объектов, который нужно сохранить в файл. Могу сохранять в файлы трех типов: текстовые, бинарные и xml. Нужен метод, который будет определять размер файлов, содержащих мой список объектов. Т.е. у меня есть список объектов, который я хочу сохранить в файл, я вызываю этот метод, а он мне сообщает: сколько памяти потребуется для текстового файла, сколько для бинарного и сколько для xml-файла. Поля моего класса:</p>

<pre><code>[Serializable]
public class Equipment
{
    public string Department { get; set; }
    public string Name { get; set; }
    int amount;
    double unitCost;
    double totalCost;
}
</code></pre>

<p>Методы для записи файлов:</p>

<pre><code>    public static void WriteTxtFile(List&lt;Equipment&gt; equipments, string path)
    {
        using (StreamWriter writer = new StreamWriter(path, false))
        {
            equipments.ForEach(equipment =&gt; writer.WriteLine($"{equipment.Department};{equipment.Name};{equipment.Amount};{equipment.UnitCost};{equipment.TotalCost}"));
        }
    }

    public static void WriteBinaryFile(List&lt;Equipment&gt; equipments, string path)
    {
        using (BinaryWriter writer = new BinaryWriter(File.Open(path, FileMode.OpenOrCreate)))
        {
            foreach(Equipment equipment in equipments)
            {
                writer.Write(equipment.Department);
                writer.Write(equipment.Name);
                writer.Write(equipment.Amount);
                writer.Write(equipment.UnitCost);
                writer.Write(equipment.TotalCost);
            }
        }
    }

    public static void WriteXmlFile(List&lt;Equipment&gt; equipments, string path)
    {
        XmlSerializer formatter = new XmlSerializer(typeof(List&lt;Equipment&gt;));
        using (FileStream fs = new FileStream(path, FileMode.OpenOrCreate))
        {
            formatter.Serialize(fs, equipments);
        }
    }
</code></pre>
