---
title: "Почему переполнение стека в дочернем потоке убивает весь процесс?"
se.owner.user_id: 32793
se.owner.display_name: "iluxa1810"
se.owner.link: "https://ru.stackoverflow.com/users/32793/iluxa1810"
se.link: "https://ru.stackoverflow.com/questions/907230/%d0%9f%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d0%bf%d0%b5%d1%80%d0%b5%d0%bf%d0%be%d0%bb%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d1%81%d1%82%d0%b5%d0%ba%d0%b0-%d0%b2-%d0%b4%d0%be%d1%87%d0%b5%d1%80%d0%bd%d0%b5%d0%bc-%d0%bf%d0%be%d1%82%d0%be%d0%ba%d0%b5-%d1%83%d0%b1%d0%b8%d0%b2%d0%b0%d0%b5%d1%82-%d0%b2%d0%b5%d1%81%d1%8c-%d0%bf%d1%80%d0%be%d1%86%d0%b5%d1%81%d1%81"
se.question_id: 907230
se.post_type: question
se.score: 10
---
<p>Отвечая на этот <a href="https://ru.stackoverflow.com/questions/907181/%D0%92%D0%BE%D0%B7%D0%BD%D0%B8%D0%BA%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA-%D0%B2-%D0%B4%D1%80%D1%83%D0%B3%D0%BE%D0%BC-%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D0%B5-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-c">вопрос</a> был удивлен, что переполнение стека в дочернем потоке убивает процесс целиком.</p>

<p>Собственно, вопрос:</p>

<p>А почему так происходит? Ведь каждый поток имеет собственный стек, даже, на сколько я помню, Рихтер писал об этом.</p>

<p>Даже <code>StackTrace().FrameCount</code> показывает различное кол-во фреймов в основном потоке и дочернем.</p>

<p>В С++- это обрабатываемое исключение, если верить комментариям из предыдущего вопроса, а в <code>.NET</code> нет, так как возможно, как я понимаю, что СLR, которой нужно что-то сделать, может повредится из-за не хватки стека.</p>

<p><code>CLR</code>, по идее, одна на все приложение и она точно не крутится в дочернем потоке.</p>

<p>Получается, что запуская чужой код, к исходникам которого мы не имеем доступа, хоть в отдельном потоке, хоть в отдельном домене, то мы все равно падаем и в .NET никак нельзя предотвратить это при таком типе исключения?</p>

<p><strong>UPD</strong></p>

<p>Есть какие-то "Области с ограничением выполнения" CER, где можно указать, что метод может поверить процесс. Это никак не оказывает влияния на CLR, что бы она подготовилась и не умерла?</p>
