{"owner":{"user_type":"does_not_exist","display_name":"user221357"},"is_accepted":false,"score":1,"last_activity_date":1547183774,"last_edit_date":1547183774,"creation_date":1543753399,"answer_id":914460,"question_id":859014,"body":"<p>У всех контролов есть функция DrawToBitmap()</p>\n\n<p>Если предположить, что у тебя панель меньше размера содержимого(и у тебя есть полоса прокрутки). Тогда ты меняешь на 1 секунду размер панели до размера содержимого, делаешь скриншот, а потом возвращаешь размер панели назад:</p>\n\n<pre><code>    public Bitmap GetControlScreenshot(Control control)\n    {\n        Size szCurrent = control.Size;\n        control.AutoSize = true;\n\n        Bitmap bmp = new Bitmap(control.Width, control.Height);//создаем картинку нужных размеров\n        control.DrawToBitmap(bmp, control.ClientRectangle);//копируем изображение нужного контрола в bmp\n\n        control.AutoSize = false;\n        control.Size = szCurrent;\n\n        return bmp;\n    }\n</code></pre>\n\n<p>Если же панель не на столько большая, будет достаточно:</p>\n\n<pre><code>System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(panel1.Width, panel1.Height);//создаем картинку нужных размеров\npanel1.DrawToBitmap(bmp, panel1.ClientRectangle);//копируем изображение нужного контрола в bmp\n</code></pre>\n\n<p>Собственно, если воспользоваться на родительском элементе, то он отрисует в битмап и все дочерние. И скриншотить ничего не нужно, оно захватит полностью контролы, даже, если в даную секунду на форме их не видно. (то есть часть контрола выходит ЗА рамки формы)</p>\n\n<p>Вот пример окна:\n<a href=\"https://i.stack.imgur.com/HyRz7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HyRz7.png\" alt=\"введите сюда описание изображения\"></a></p>\n\n<p>Вот пример сделанного скриншота панели:\n<a href=\"https://i.stack.imgur.com/bKzOC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bKzOC.png\" alt=\"введите сюда описание изображения\"></a></p>\n\n<p>Никаких мучений с рекурсией не нужно.</p>\n\n<p>Upd:\nДля скриншота всей формы и всех элементов на ней подход тот же(ведь, сама форма -- тот же контрол!):</p>\n\n<pre><code>   System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(this.Width, this.Height);//создаем картинку нужных размеров\n\n   this.DrawToBitmap(bmp, new Rectangle(0, 0, this.Width, this.Height));//копируем изображение нужного контрола в bmp\n\n   bmp.Save(\"E:\\\\somePanelImage.bmp\");    //ну и дальше просто сохраняем\n</code></pre>\n\n<p>UPD2: некоторые считают что таким макаром нельзя отскриншотить дочерние элементы. У этого растут ноги от того, что некоторые люди создают контролы програмно не задавая родительского элемента новому. </p>\n\n<p>Что б проще: програмно создается новый элемент и размещается с абсолютными координатами формы НАД панелью. В таком случае, конечно же, панель будет отскриншочена этим методом пустой, ведь \"дочерний\" элемент не является дочерним в буквальном смысле. <strong>Он находится просто НАД панелью и только лишь визуально выглядит дочерним контролом.</strong> </p>\n"}