---
title: "Answer 1004732"
se.owner.user_id: 182162
se.owner.display_name: "Mark Shevchenko"
se.owner.link: "https://ru.stackoverflow.com/users/182162/mark-shevchenko"
se.answer_id: 1004732
se.question_id: 1004704
se.post_type: answer
se.score: 3
se.is_accepted: True
---
<p>Похожие вещи делаются в C# через так называемые <em>деревья выражений</em>. Эта тема сложная, которая требует ознакомления, и её невозможно осветить в одном ответе на Stack Overflow.</p>

<p>Если вкратце, то для начала вы должны объявить параметр не как <code>Func&lt;T, bool&gt;</code>, <code>Action&lt;T&gt;</code> или <code>Predicate&lt;T&gt;</code>, а как <code>Expression&lt;Func&lt;T, bool&gt;&gt;</code> или <code>Expression&lt;Predicated&lt;T&gt;&gt;</code>.</p>

<pre><code>public string GetSource&lt;T&gt;(Expression&lt;Predicate&lt;T&gt;&gt; expression)
{
    . . .
}
</code></pre>

<p>В этом случае вы не сможете просто вызывать метод, предварительно его придётся <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.linq.expressions.expression-1.compile?view=netframework-4.8" rel="nofollow noreferrer">скомпилировать</a>.</p>

<p>На зато вы можете <em>разобрать</em> его на составные части. В случае <code>x.Name == "name"</code> в корне дерева будет находиться объект типа <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.linq.expressions.binaryexpression?view=netframework-4.8" rel="nofollow noreferrer"><code>BinaryExpression</code></a> со свойством <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.linq.expressions.expression.nodetype?view=netframework-4.8" rel="nofollow noreferrer"><code>NodeType</code></a> равным <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.linq.expressions.expressiontype?view=netframework-4.8" rel="nofollow noreferrer"><code>ExpressionType.Equal</code></a>.</p>

<p>Левый и правый дочерние узлы этого узла будут представлять <code>x.Name</code> и <code>"name"</code> соответственно. Проще всего пройтись в отладчике по этому дереву и посмотреть, какие объекты там встречаются.</p>

<p>Чтобы вывести всё это на экран, можно просто вызвать метод <code>expression.ToString()</code>. Но в сложных случаях придётся формировать строку из дерева выражения самостоятельно.</p>
