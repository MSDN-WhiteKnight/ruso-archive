---
title: "Очистка объекта типа IEnumerable полученный через PropertyInfo"
se.owner.user_id: 298154
se.owner.display_name: "NewView"
se.owner.link: "https://ru.stackoverflow.com/users/298154/newview"
se.link: "https://ru.stackoverflow.com/questions/926467/%d0%9e%d1%87%d0%b8%d1%81%d1%82%d0%ba%d0%b0-%d0%be%d0%b1%d1%8a%d0%b5%d0%ba%d1%82%d0%b0-%d1%82%d0%b8%d0%bf%d0%b0-ienumerable-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b5%d0%bd%d0%bd%d1%8b%d0%b9-%d1%87%d0%b5%d1%80%d0%b5%d0%b7-propertyinfo"
se.question_id: 926467
se.post_type: question
se.score: 0
---
<p>Проблема в очистки списка приведенному к IEnumerable полученный через рефлексию с помощью <code>PropertyInfo</code></p>

<p>часть кода получения и приведения к типу:</p>

<pre><code>PropertyInfo[] p = ele.GetType().GetProperties();

Object obj = p[i].GetValue(ele, null);

if (obj is IEnumerable&lt;Object&gt;)
{
    IEnumerable&lt;Object&gt; ie = (obj as IEnumerable&lt;Object&gt;);
    if (ie == null)
           return;

    // часть 1-я: чистит локально, поскольку копия, в структуре данные сохраняются
    ie.ToList().Clear();
    // часть 2-я: Создание нового объекта и замещение
    var x = new IEnumerable&lt;object&gt;();
    p[i].SetValue(ele, x, null);
// Вот тут происходит exception про несоответствие типов,
// например Ienumerable&lt;object&gt; невозможно преобразовать в List&lt;string&gt;
}
</code></pre>

<p>Как правильно очистить IEnumerable/List через рефлексию? При чем тип <code>&lt;ХХХ&gt;</code> может быть разный.
Возможно надо как то более тонко детерминировать тип, а не приводить к <code>IEnumerable&lt;object&gt;</code>?</p>
