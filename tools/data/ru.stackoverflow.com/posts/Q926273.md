---
title: "Получить права папки у конкретного пользователя"
se.owner.user_id: 243717
se.owner.display_name: "Range"
se.owner.link: "https://ru.stackoverflow.com/users/243717/range"
se.link: "https://ru.stackoverflow.com/questions/926273/%d0%9f%d0%be%d0%bb%d1%83%d1%87%d0%b8%d1%82%d1%8c-%d0%bf%d1%80%d0%b0%d0%b2%d0%b0-%d0%bf%d0%b0%d0%bf%d0%ba%d0%b8-%d1%83-%d0%ba%d0%be%d0%bd%d0%ba%d1%80%d0%b5%d1%82%d0%bd%d0%be%d0%b3%d0%be-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f"
se.question_id: 926273
se.post_type: question
se.score: 2
---
<p>Как можно получить права доступа у конкретного пользователя к конкретной папке: Права:</p>

<ul>
<li>R - read</li>
<li>W - write</li>
<li>C - change</li>
<li>FC - full control</li>
<li>RW - read and write</li>
<li>L - list(просмотр папок)</li>
<li>RO - read only</li>
</ul>

<p>Пока дошёл до этого, но не понимаю, какие биты получать из переменной типа <em>ACCESS_MASK</em>:</p>

<pre><code>HANDLE result = CreateFile(LR"(C:\Users\admin_test\Desktop\test\)", GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, NULL);
if (result != INVALID_HANDLE_VALUE)
    std::cout &lt;&lt; "OK" &lt;&lt; std::endl;
else
    std::cout &lt;&lt; "ERROR" &lt;&lt; std::endl;

PSID pSidOwner = NULL;
PSECURITY_DESCRIPTOR pSD = NULL;
PACL ppDacl = NULL;

SECURITY_INFORMATION ssi = DACL_SECURITY_INFORMATION;
GetSecurityInfo(result, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, &amp;pSidOwner,
    NULL,
    &amp;ppDacl,
    NULL,
    &amp;pSD);

TRUSTEE trust;
BuildTrusteeWithName(&amp;trust, LPWSTR(L"admin_test"));
ACCESS_MASK rights = 0;
auto err = GetEffectiveRightsFromAcl(ppDacl, &amp;trust, &amp;rights);
</code></pre>
