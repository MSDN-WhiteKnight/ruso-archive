---
title: "Что делает setlocale()? C/C++"
se.owner.user_id: 
se.owner.display_name: "user294535"
se.owner.link: ""
se.link: "https://ru.stackoverflow.com/questions/886176/%d0%a7%d1%82%d0%be-%d0%b4%d0%b5%d0%bb%d0%b0%d0%b5%d1%82-setlocale-c-c"
se.question_id: 886176
se.post_type: question
se.score: -2
---
<p>Мне нужно перевести строку из <strong>cp1251</strong> в <strong>Unicode</strong>. Для этого я использую <code>MutliByteToWideChar(1251, ...)</code>.</p>

<p>Странность заключается в том, что если не сделать:</p>

<pre><code>setlocate(LC_ALL, "rus");
</code></pre>

<p>То символы с кодами <strong>[128-255]</strong> переводятся неверно. Да, я знаю, что <strong>setlocale()</strong> задает используемую локаль... Но я не понимаю, какая тут связь с функцией конвертации, которой явно указали, что входная строка находится в <strong>cp1251</strong>.</p>
