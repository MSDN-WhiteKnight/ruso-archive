---
title: "Для картинки недостаточно памяти при использовании Graphics"
se.owner.user_id: 297302
se.owner.display_name: "Mister Crabs"
se.owner.link: "https://ru.stackoverflow.com/users/297302/mister-crabs"
se.link: "https://ru.stackoverflow.com/questions/919213/%d0%94%d0%bb%d1%8f-%d0%ba%d0%b0%d1%80%d1%82%d0%b8%d0%bd%d0%ba%d0%b8-%d0%bd%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%be%d1%87%d0%bd%d0%be-%d0%bf%d0%b0%d0%bc%d1%8f%d1%82%d0%b8-%d0%bf%d1%80%d0%b8-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b8-graphics"
se.question_id: 919213
se.post_type: question
se.score: 1
---
<p>Код очень прост: Нажимаю на кнопку, в PictureBox загружается картинка. </p>

<pre><code>private void button1_Click(object sender, EventArgs e)
{
        using (FileStream stream = File.OpenRead(FullName))
        {
            pictureBox1.Image = (Bitmap)Bitmap.FromStream(stream).Clone();
            stream.Close();
            stream.Dispose();
        }
}
</code></pre>

<p>Но когда из другой функции\события использую Graphics на pictureBox'е, то он ругается на то, что недостаточно памяти. Ругается на Graphics.FromImage не зависимо от того, что я буду с этим графиксом делать. Пример:</p>

<pre><code>using (Graphics g = Graphics.FromImage(pictureBox1.Image))
{
    g.Clear(Color.FromArgb(0, 255, 255, 255));
    pictureBox1.Invalidate();
}
</code></pre>

<p>Вопрос-то в том, почему до загрузки картинки в PictureBox могу делать с Graphics чего душа пожелает:обрезать, заливать,рисовать; а после загрузки картинки нет?
p.s. Картинки пробовал разные и разного размера. Одна и та же картинка работает до загрузки(она уже была в pictureBox по умолчанию) и не работает после загрузки в pictureBox. 
Обошел достаточно много форумов по этой теме, но свой случай(или максимально похожий случай) не нашел.</p>
