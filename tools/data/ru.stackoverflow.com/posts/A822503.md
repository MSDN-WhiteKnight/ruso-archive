---
title: "Answer 822503"
se.owner.user_id: 218063
se.owner.display_name: "Андрей NOP"
se.owner.link: "https://ru.stackoverflow.com/users/218063/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-nop"
se.answer_id: 822503
se.question_id: 821933
se.post_type: answer
se.score: 2
se.is_accepted: False
---
<p>В шаблоне кнопки есть элемент <code>ButtonChrome</code> (называется <code>Chrome</code>), нажатие по кнопке с помощью триггера выставляет свойство <code>RenderPressed</code> этого элемента в значение <code>true</code>. Вы можете добавить кнопке Attached Property и переопределить ее шаблон, в котором добавить еще один триггер на установку этого AP.</p>

<p>Более простой, но менее изящный способ — наследоваться от кнопки и выставить публичный метод для ее нажатия:</p>

<pre><code>class MyButton : Button
{
    public async void PressAsync()
    {
        var chrome = GetTemplateChild("Chrome") as Decorator;
        if (chrome == null) return;
        var chromeType = chrome.GetType();
        var propertyInfo = chromeType.GetProperty("RenderPressed");
        propertyInfo.SetValue(chrome, true);
        await Task.Delay(100);
        propertyInfo.SetValue(chrome, false);
    }
}
</code></pre>

<p>Я здесь использовал рефлексию, т.к. <code>ButtonChrome</code> может использоваться из разных сборок (зависит от ОС и от ее темы).</p>

<p>Использование:</p>

<pre><code>&lt;StackPanel VerticalAlignment="Center"&gt;
    &lt;TextBox Margin="10,0,10,5" TextChanged="TextBox_TextChanged"/&gt;
    &lt;c:MyButton x:Name="MB" Content="Click me" Padding="10,2"
                HorizontalAlignment="Center"/&gt;
&lt;/StackPanel&gt;
</code></pre>

<p>Кодбихайнд:</p>

<pre><code>private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    MB.PressAsync();
}
</code></pre>

<p><a href="https://i.stack.imgur.com/ZTtdz.gif" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/ZTtdz.gif" alt="введите сюда описание изображения"></a></p>

<p>Другой, еще более костыльный способ — использовать вместо обычной кнопки переключатель <code>ToggleButton</code>:</p>

<pre><code>class MyButton : ToggleButton
{
    protected override async void OnChecked(RoutedEventArgs e)
    {
        base.OnChecked(e);
        await Task.Delay(100);
        IsChecked = false;
    }
}
</code></pre>

<p>При нажатии кнопки в поле ввода просто установите ему <code>IsChecked = true</code>, через 0,1 с он "откинется" автоматически:</p>

<pre><code>private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    MB.IsChecked = true;
}
</code></pre>
