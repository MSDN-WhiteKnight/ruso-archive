{"tags":["c++","winapi"],"owner":{"reputation":778,"user_id":276534,"user_type":"registered","accept_rate":36,"profile_image":"https://www.gravatar.com/avatar/24721e4814cbcea0fe1ec3dc37df2cdc?s=128&d=identicon&r=PG&f=1","display_name":"Mike Waters","link":"https://ru.stackoverflow.com/users/276534/mike-waters"},"is_answered":true,"view_count":441,"accepted_answer_id":875145,"answer_count":1,"score":2,"last_activity_date":1535603869,"creation_date":1535572172,"last_edit_date":1535574041,"question_id":875087,"link":"https://ru.stackoverflow.com/questions/875087/c-define-unicode","title":"C++ #define UNICODE","body":"<p>Код:</p>\n\n<pre><code>#ifndef UNICODE\n#define UNICODE\n#endif \n\n#include &lt;windows.h&gt;\n\nLRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {\n switch(uMsg) {\n  case WM_DESTROY:\n   PostQuitMessage(0);\n   return 0;\n  case WM_PAINT: {\n   PAINTSTRUCT ps;\n   HDC hdc = BeginPaint(hwnd, &amp;ps);\n   FillRect(hdc, &amp;ps.rcPaint, (HBRUSH)(COLOR_WINDOW + 1));\n   EndPaint(hwnd, &amp;ps);\n   return 0;\n  }\n }\n return DefWindowProc(hwnd, uMsg, wParam, lParam);\n}\n\nint WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow) {\n // Register the window class.\n const wchar_t CLASS_NAME[] = L\"Sample Window Class\";\n WNDCLASS wc = {};\n wc.lpfnWndProc = WindowProc;\n wc.hInstance = hInstance;\n wc.lpszClassName = CLASS_NAME;\n RegisterClass(&amp;wc);\n // Create the window.\n HWND hwnd = CreateWindowEx(\n  0,                              // Optional window styles.\n  CLASS_NAME,                     // Window class\n  L\"Learn to Program Windows\",    // Window text\n  WS_OVERLAPPEDWINDOW,            // Window style\n                                // Size and position\n  CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,\n  NULL,       // Parent window    \n  NULL,       // Menu\n  hInstance,  // Instance handle\n  NULL        // Additional application data\n );\n\n if(hwnd == NULL) {\n  return 0;\n }\n\n ShowWindow(hwnd, nCmdShow);\n\n // Run the message loop.\n\n MSG msg = {};\n while (GetMessage(&amp;msg, NULL, 0, 0)) {\n  TranslateMessage(&amp;msg);\n  DispatchMessage(&amp;msg);\n }\n\n return 0;\n}\n</code></pre>\n\n<p>Вопросы:</p>\n\n<ol>\n<li>Что делают препроцессорные директивы?</li>\n<li>Что делает L перед string? (L\"Sample Window Class\";)</li>\n<li>Можно ли без препроцессорных директив?</li>\n</ol>\n"}