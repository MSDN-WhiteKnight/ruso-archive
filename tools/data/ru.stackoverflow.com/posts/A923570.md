---
title: "Answer 923570"
se.owner.user_id: 232
se.owner.display_name: "avp"
se.owner.link: "https://ru.stackoverflow.com/users/232/avp"
se.answer_id: 923570
se.question_id: 923326
se.post_type: answer
se.score: 0
se.is_accepted: False
---
<p>По крайней мере в Линуксе, если верить <a href="http://man7.org/linux/man-pages/man5/proc.5.html" rel="nofollow noreferrer">man 5 proc</a>
 это возможно.</p>

<p>Cудя по описанию, для известного адреса переменной  вам нужно прочесть  соответствующие 8 байт (<code>uint64_t</code>) (для страниц размером 4k просто сдвиньте адрес на 9, обнулите 3 младших бита и сделайте seek) из файла <strong>/proc/self/pagemap</strong> и посмотреть на бит 62. Если 0, то страница с переменной в swap-е.</p>

<blockquote>
<pre><code>/proc/[pid]/pagemap (since Linux 2.6.25)
          This file shows the mapping of each of the process's virtual
          pages into physical page frames or swap area.  It contains one
          64-bit value for each virtual page, with the bits set as fol‐
          lows:

               63     If set, the page is present in RAM.

               62     If set, the page is in swap space

               61 (since Linux 3.5)
                      The page is a file-mapped page or a shared anony‐
                      mous page.

               60–57 (since Linux 3.11)
                      Zero

               56 (since Linux 4.2)
                      The page is exclusively mapped.

               55 (since Linux 3.11)
                      PTE is soft-dirty (see the kernel source file Doc‐
                      umentation/vm/soft-dirty.txt).

               54–0   If the page is present in RAM (bit 63), then these
                      bits provide the page frame number, which can be
                      used to index /proc/kpageflags and /proc/kpage‐
                      count.  If the page is present in swap (bit 62),
                      then bits 4–0 give the swap type, and bits 54–5
                      encode the swap offset.

          Before Linux 3.11, bits 60–55 were used to encode the base-2
          log of the page size.

          To employ /proc/[pid]/pagemap efficiently, use
          /proc/[pid]/maps to determine which areas of memory are actu‐
          ally mapped and seek to skip over unmapped regions.

          The /proc/[pid]/pagemap file is present only if the CON‐
          FIG_PROC_PAGE_MONITOR kernel configuration option is enabled.

          Permission to access this file is governed by a ptrace access
          mode PTRACE_MODE_READ_FSCREDS check; see ptrace(2).
</code></pre>
</blockquote>
