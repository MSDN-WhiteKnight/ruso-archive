---
title: "Answer 1024865"
se.owner.user_id: 182162
se.owner.display_name: "Mark Shevchenko"
se.owner.link: "https://ru.stackoverflow.com/users/182162/mark-shevchenko"
se.answer_id: 1024865
se.question_id: 1024325
se.post_type: answer
se.score: 7
se.is_accepted: False
---
<p>Класс в классе увеличивает размер файла. Если в файле более трёхсот строк, с ним уже не очень удобно работать. Если ваш класс становится слишком большим, это подсказывает, что, возможно, нарушен принцип <em>единственной ответственности</em> (single responsibility).</p>

<p>Поэтому классы в классах используют только тогда, когда вы передаёте важную информацию для программиста, который будет поддерживать и изменять ваш код. Если класс <code>Bar</code> находится в <code>Foo</code>, значит, он должен знать, как устроен <code>Foo</code>.</p>

<p>Пример: реализуем паттерн <a href="http://cpp-reference.ru/patterns/behavioral-patterns/memento/" rel="noreferrer">Memento</a>:</p>

<blockquote>
  <p>Клиент является "посыльным" за Memento, но только исходный объект может сохранять и извлекать информацию из Memento (Memento является "непрозрачным" для клиентов и других объектов). </p>
</blockquote>

<p>Из описания паттерна мы понимаем, что класс <code>Originator</code> и класс <code>Memento</code> должны знать друг о друге гораздо больше, чем остальные классы. Именно для подчёркивания этого факта нужно разместить один внутри другого. Я бы размещал <code>Memento</code> внутри <code>Originator</code> и вынес бы в него сохранение и восстановление состояния, чтобы оставить в <code>Originator</code> только его основную ответственность.</p>

<p>Поскольку в подавляющем большинстве случаев мы всё-таки хотим скрыть детали реализации, мы не используем этот приём слишком часто.</p>
