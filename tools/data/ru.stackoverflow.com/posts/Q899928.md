---
title: "Как написать метод/класс, который бы одинаково работал со всеми числовыми типами?"
se.owner.user_id: 248572
se.owner.display_name: "Kir_Antipov"
se.owner.link: "https://ru.stackoverflow.com/users/248572/kir-antipov"
se.link: "https://ru.stackoverflow.com/questions/899928/%d0%9a%d0%b0%d0%ba-%d0%bd%d0%b0%d0%bf%d0%b8%d1%81%d0%b0%d1%82%d1%8c-%d0%bc%d0%b5%d1%82%d0%be%d0%b4-%d0%ba%d0%bb%d0%b0%d1%81%d1%81-%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b9-%d0%b1%d1%8b-%d0%be%d0%b4%d0%b8%d0%bd%d0%b0%d0%ba%d0%be%d0%b2%d0%be-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0%d0%bb-%d1%81%d0%be-%d0%b2%d1%81%d0%b5%d0%bc%d0%b8-%d1%87%d0%b8%d1%81%d0%bb%d0%be%d0%b2%d1%8b%d0%bc%d0%b8-%d1%82%d0%b8%d0%bf%d0%b0%d0%bc%d0%b8"
se.question_id: 899928
se.post_type: question
se.score: 15
---
<p>Предположим, я хочу описать <code>generic</code>-класс, выполняющий роль калькулятора, таким образом, чтобы он одинаково работал для всех числовых типов. Т.е.:</p>

<ul>
<li>sbyte </li>
<li>byte </li>
<li>short </li>
<li>ushort </li>
<li>int </li>
<li>uint</li>
<li>long </li>
<li>ulong </li>
<li>float </li>
<li>double </li>
</ul>

<p>Сложность задачи заключается в том, что пусть все эти типы и объединяет наличие определения для их экземпляров арифметических операций, однако они не наследуют какого-либо общего интерфейса типа <code>IArithmetical</code>, <code>INumber</code>. А также <a href="https://docs.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/where-generic-type-constraint" rel="noreferrer">ограничение where</a> в <code>C#</code> не позволяет нам описать нечто вроде:</p>

<pre><code>public static void Add&lt;T&gt;(T A, T B) where T : +, -, *, /, % ...
</code></pre>

<p>Так что компилятор не может быть уверен в том, что для всех возможных типов, эксплуатирующих метод, определены нужные операции</p>

<p>Это приводит к тому, что подобный код:</p>

<pre><code>public class Calculator&lt;T&gt;
{
    public T Add(T A, T B) =&gt; A + B;
    public T Sub(T A, T B) =&gt; A - B;
    public T Mul(T A, T B) =&gt; A * B;
    public T Div(T A, T B) =&gt; A / B;
    public T Mod(T A, T B) =&gt; A % B;
}
</code></pre>

<p>Увы, но просто невозможно скомпилировать: по описанным выше причинам будет выкинута <a href="https://docs.microsoft.com/ru-ru/dotnet/csharp/language-reference/compiler-messages/cs0019" rel="noreferrer">ошибка CS0019</a></p>

<hr>

<p>Так что же делать в данной ситуации? Возможно-ли вообще средствами <code>C#</code> описать <code>generic</code>-класс/метод, который бы мог работать с числами и только с ними?</p>
