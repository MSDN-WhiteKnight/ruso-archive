{"tags":["c++","winapi","windows-10"],"owner":{"reputation":634,"user_id":18910,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/1fc686b03593a40824e1d1c4ab7e6723?s=128&d=identicon&r=PG","display_name":"ilw","link":"https://ru.stackoverflow.com/users/18910/ilw"},"is_answered":true,"view_count":57,"answer_count":1,"score":1,"last_activity_date":1562342780,"creation_date":1562338393,"last_edit_date":1562342780,"question_id":999794,"link":"https://ru.stackoverflow.com/questions/999794/%d0%9d%d0%b5%d0%b2%d0%be%d0%b7%d0%bc%d0%be%d0%b6%d0%bd%d0%be-%d1%81%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c-%d1%80%d0%b5%d0%b0%d0%ba%d1%82%d0%b8%d0%b2%d0%b0%d1%86%d0%b8%d1%8e-%d0%be%d0%ba%d0%bd%d0%b0-%d0%bf%d0%be%d1%81%d1%80%d0%b5%d0%b4%d1%81%d1%82%d0%b2%d0%be%d0%bc-winapi-setforegroundwindow","title":"Невозможно сделать реактивацию окна посредством Winapi - SetForegroundWindow","body":"<pre><code>int main() {\n\n    HWND hWnd = FindWindow(NULL, \"Безымянный — Блокнот\");    \n    if (!hWnd) ExitProcess(1);\n\n    for (int i = 0; i &lt; 2; ++i) {\n        SetForegroundWindow(hWnd);\n        Sleep(2000);\n    }\n\n\n    ExitProcess(0);\n}\n</code></pre>\n\n<p>При первом шаге цикла <code>notepad</code> активируется нормально.\nПотом я делаю дективацию нотепада вручную (альт таб на какое то другое окно (<strong>не консольное</strong>, если запуск даного приложения происходит из консоли)).\nНо на втором шаге <code>notepad</code> не активируется, а мигает в трее коричневым.\n<a href=\"https://i.stack.imgur.com/dUgnH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dUgnH.png\" alt=\"введите сюда описание изображения\"></a>\nКак сделать реактивацию возможной?</p>\n\n<p><strong>Update</strong>:\nПрочтя ответы и доп. инфу попробовал сделать вот так. </p>\n\n<pre><code>int main(int argc, char **argv) {\n\n    if (argc &gt; 1) {\n        HWND hWnd = FindWindow(NULL, \"Безымянный — Блокнот\");\n        if (!hWnd) ExitProcess(1);\n        SetForegroundWindow(hWnd);\n        ExitProcess(10);\n    }\n\n    std::string app(argv[0]);\n    app.append(\" 1\");\n    for (int i = 0; i &lt; 2; ++i) {\n        system(app.c_str());\n        Sleep(2000);\n    }\n\n    ExitProcess(0);\n }\n</code></pre>\n\n<p>И ведь задуманное работает! Неужели нельзя найти обходной путь и заставить работать все это в одном процессе. :(\nВедь с костылем все равно работает так или иначе.</p>\n"}