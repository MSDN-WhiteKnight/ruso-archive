{"tags":["c++","c","winapi"],"owner":{"reputation":15,"user_id":295151,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-mAL8RS6Lo5A/AAAAAAAAAAI/AAAAAAAAAVM/y6OqkTSdjoI/photo.jpg?sz=128","display_name":"Naydachi Kamikadze","link":"https://ru.stackoverflow.com/users/295151/naydachi-kamikadze"},"is_answered":true,"view_count":69,"accepted_answer_id":945884,"answer_count":1,"score":1,"last_activity_date":1550413861,"creation_date":1550216596,"question_id":945051,"link":"https://ru.stackoverflow.com/questions/945051/%d0%9a%d0%b0%d0%ba%d0%be%d0%b9-%d1%84%d1%83%d0%bd%d0%ba%d1%86%d0%b8%d0%b5%d0%b9-%d0%bc%d0%be%d0%b6%d0%bd%d0%be-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b8%d1%82%d1%8c-%d1%83%d0%ba%d0%b0%d0%b7%d0%b0%d1%82%d0%b5%d0%bb%d1%8c-%d0%bd%d0%b0-%d1%83%d1%81%d1%82%d1%80%d0%be%d0%b9%d1%81%d1%82%d0%b2%d0%be-%d0%b8%d0%b7-pdev-broadcast-hdr-%d0%bf%d0%be-d","title":"Какой функцией можно получить указатель на устройство из PDEV_BROADCAST_HDR по dbcc_name","body":"<p>Как вариант я могу перечислять все устройства получать их DEVICE_ID и сравнивать со своим dbcc_name(но это какие-то грабли). Возможно существует функция которая сразу вернёт указатель на устройство приняв входным параметром dbcc_name??? Чтобы получить например DEVINST именно этого устройства. </p>\n\n<pre><code>LRESULT CALLBACK WndProc(HWND hWnd, UINT uiMsg, WPARAM wParam, LPARAM lParam)\n{\n    if (DBT_DEVICEARRIVAL == wParam || DBT_DEVICEREMOVECOMPLETE == wParam)\n    {\n        PDEV_BROADCAST_HDR lpdb = (PDEV_BROADCAST_HDR)lParam;\n\n        if (lpdb-&gt;dbch_devicetype == DBT_DEVTYP_DEVICEINTERFACE)\n        {\n            PDEV_BROADCAST_DEVICEINTERFACE lpdbd = (PDEV_BROADCAST_DEVICEINTERFACE)lpdb;\n            lpdbd-&gt;dbcc_name;// \\\\?\\USB#Vid_04e8&amp;Pid_503b# 0002F9A9828E0F06#{a5dcbf10-6530-11d2-901f-00c04fb951ed}\n        }\n    }\n    return DefWindowProc(hWnd, uiMsg, wParam, lParam);\n}\n</code></pre>\n"}