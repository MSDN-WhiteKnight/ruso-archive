{"tags":["c#","исключения","c++-cli","clr"],"owner":{"reputation":2227,"user_id":298154,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0YvNK.jpg?s=128&g=1","display_name":"NewView","link":"https://ru.stackoverflow.com/users/298154/newview"},"is_answered":true,"view_count":43,"accepted_answer_id":952776,"answer_count":1,"score":1,"last_activity_date":1551803210,"creation_date":1551714112,"last_edit_date":1551716326,"question_id":952304,"link":"https://ru.stackoverflow.com/questions/952304/%d1%81-clr-msbuild-warning-ca2240-%d0%94%d0%be%d0%b1%d0%b0%d0%b2%d1%8c%d1%82%d0%b5-%d1%80%d0%b5%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8e-getobjectdata","title":"с++ clr MSBUILD warning CA2240 - Добавьте реализацию GetObjectData","body":"<p>Собственно вопрос, реализация GetObjectData там есть, но выдает предупреждение. Полагаю что формат декларации GetObjectData не совпадает, но формат брал с MSDN.</p>\n\n<p>Код класса:</p>\n\n<pre><code>[Serializable]\npublic ref struct EmuDevException\n    : public Exception, ISerializable\n{\nprivate:\n    int __line;\n    String ^ __msg;\n    GameData::EmuDevError __id;\n    System::Exception ^ __ex;\n\nprotected:\n    EmuDevException::EmuDevException(\n        SerializationInfo ^info,\n        StreamingContext ^context)\n    {\n        if (info == nullptr)\n            return;\n\n        this-&gt;Id = (GameData::EmuDevError)(info-&gt;GetByte(L\"Id\"));\n        this-&gt;Line = info-&gt;GetInt32(L\"Line\");\n        this-&gt;Msg = info-&gt;GetString(L\"Msg\");\n    }\n\npublic:\n    property String ^ Msg\n    {\n        String ^ get() { return __msg; }\n        void set(String ^v) { __msg = v; }\n    };\n    property GameData::EmuDevError Id\n    {\n        GameData::EmuDevError get() { return __id; }\n        void set(GameData::EmuDevError v) { __id = v; }\n    };\n    property int Line\n    {\n        int get() { return __line; }\n        void set(int v) { __line = v; }\n    };\n    property System::Exception ^ InnerExcept\n    {\n        System::Exception ^ get() { return __ex; }\n    };\n\n    [System::Security::Permissions::SecurityPermission(\n        System::Security::Permissions::SecurityAction::LinkDemand,\n        Flags = System::Security::Permissions::SecurityPermissionFlag::SerializationFormatter,\n        Unrestricted = false\n    )]\n    void GetObjectData(\n        SerializationInfo ^info,\n        StreamingContext ^context)\n    {\n        if (info == nullptr)\n            return;\n\n        info-&gt;AddValue(L\"Id\", __id);\n        info-&gt;AddValue(L\"Line\", __line);\n        info-&gt;AddValue(L\"Msg\", __msg);\n    }\n\n    EmuDevException::EmuDevException(GameData::EmuDevError _id) : __id(_id), __line(-1), __msg(String::Empty), __ex(nullptr) {}\n    EmuDevException::EmuDevException(GameData::EmuDevError _id, int _line) : __id(_id), __line(_line), __msg(String::Empty), __ex(nullptr) {}\n    EmuDevException::EmuDevException(GameData::EmuDevError _id, int _line, String ^_msg) : __id(_id), __line(_line), __msg(_msg), __ex(nullptr) {}\n    EmuDevException::EmuDevException(GameData::EmuDevError _id, int _line, System::Exception ^_ex) : __id(_id), __line(_line), __msg(String::Empty), __ex(_ex) {}\n};\n</code></pre>\n\n<p>Полный вывод ошибки:</p>\n\n<blockquote>\n  <p>MSBUILD : warning CA2240: Microsoft.Usage : Добавьте реализацию\n  GetObjectData к типу 'EmuDevException'.</p>\n</blockquote>\n"}