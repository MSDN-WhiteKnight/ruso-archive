{"tags":["windows"],"owner":{"reputation":415,"user_id":292257,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7b2ecff1aacf757edefd18c2e4c4a112?s=128&d=identicon&r=PG&f=1","display_name":"J. Huxley","link":"https://ru.stackoverflow.com/users/292257/j-huxley"},"is_answered":true,"view_count":97,"accepted_answer_id":906275,"answer_count":2,"score":6,"last_activity_date":1542220191,"creation_date":1542150081,"question_id":906246,"link":"https://ru.stackoverflow.com/questions/906246/%d0%9a%d0%b0%d0%ba-%d0%b4%d0%b5%d0%b8%d0%bd%d1%81%d1%82%d0%b0%d0%bb%d0%bb%d1%8f%d1%82%d0%be%d1%80%d1%8b-%d1%83%d0%b4%d0%b0%d0%bb%d1%8f%d1%8e%d1%82-%d0%b4%d0%b8%d1%80%d0%b5%d0%ba%d1%82%d0%be%d1%80%d0%b8%d0%b8-%d0%b2-%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d1%85-%d0%be%d0%bd%d0%b8-%d0%bd%d0%b0%d1%85%d0%be%d0%b4%d1%8f%d1%82%d1%81%d1%8f","title":"Как деинсталляторы удаляют директории, в которых они находятся?","body":"<p>Я вот вижу (по своему реестру), что все деинсталяторы лежат в папках, которые они удаляют. Но если попробовать сделать <code>thisDir.Delete(true /*recursively*/)</code>, то вылетит exception <code>Access to the path 'uninstaller.exe' is denied</code>. Ведь нельзя удалить файл, который выполняется. Есть вариант, что uninstaller может создать исполняемый файл (tmpUninstaller.exe) в какой-то временной директории, запустить его, tmpUninstaller.exe ждёт когда завершится оригинальный uninstaller,  зачищает всё и самоудаляется. Но, как по мне, это костыльный вариант решения поставленной задачи. Как же всё-таки uninstaller удаляет директорию в которой он находится?</p>\n"}