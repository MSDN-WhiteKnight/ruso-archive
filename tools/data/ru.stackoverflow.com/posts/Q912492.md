---
title: "Зачем нужен файл .a / .lib для подключения dll?"
se.owner.user_id: 285
se.owner.display_name: "Modus"
se.owner.link: "https://ru.stackoverflow.com/users/285/modus"
se.link: "https://ru.stackoverflow.com/questions/912492/%d0%97%d0%b0%d1%87%d0%b5%d0%bc-%d0%bd%d1%83%d0%b6%d0%b5%d0%bd-%d1%84%d0%b0%d0%b9%d0%bb-a-lib-%d0%b4%d0%bb%d1%8f-%d0%bf%d0%be%d0%b4%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d1%8f-dll"
se.question_id: 912492
se.post_type: question
se.score: 1
---
<p>Для сборки программы, к которой статически прилинкована .dll, оказалось достаточно такой команды:</p>

<pre><code>$(CC) bin\main.o -L.\bin -lcompare -o program.exe
</code></pre>

<p>При этом на момент сборки в папке <code>bin</code> должна лежать <code>compare.dll</code>. Но если я то же самое делаю из CodeBlocks, то чтобы статически слинковать dll, мне необходимо добавить в параметры линкера файл <code>compare.a</code>, который получается при сборке .dll. Почему среде разработки недостаточно просто .dll, если голый компилятор это проглатывает?</p>

<p>Кроме того, мне попадался вот такой пример команды сборки dll:</p>

<pre><code>gcc -shared -o tst.dll -Wl,--out-implib,libtstdll.a dllfct.o
</code></pre>

<p>Я так понимаю, эта команда, помимо dll, генерирует файл <code>libtstdll.a</code>. Зачем это делается через -Wl? Мы же и так просто линкуем файлы, <code>dllfct.o</code> ведь уже собран? Правильно ли я понимаю, что файл <code>libtstdll.a</code> после этого можно просто прилинковать к программе безо всяких <code>-lmyldll</code>?</p>
