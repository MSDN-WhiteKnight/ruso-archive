---
title: "Как правильно задать строку подключения к БД"
se.owner.user_id: 282842
se.owner.display_name: "Cuurjol"
se.owner.link: "https://ru.stackoverflow.com/users/282842/cuurjol"
se.link: "https://ru.stackoverflow.com/questions/776652/%d0%9a%d0%b0%d0%ba-%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d0%bb%d1%8c%d0%bd%d0%be-%d0%b7%d0%b0%d0%b4%d0%b0%d1%82%d1%8c-%d1%81%d1%82%d1%80%d0%be%d0%ba%d1%83-%d0%bf%d0%be%d0%b4%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d1%8f-%d0%ba-%d0%91%d0%94"
se.question_id: 776652
se.post_type: question
se.score: 2
---
<p>Как правильно задать строку подключения к локальной БД так, чтобы каждый раз вручную не менять путь?</p>

<p>Есть такая строка подключения:</p>

<pre><code>&lt;connectionStrings&gt;
&lt;add name="LibraryModelContainer" connectionString="metadata=res://*/LibraryModel.csdl|res://*/LibraryModel.ssdl|res://*/LibraryModel.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=(LocalDB)\MSSQLLocalDB;attachdbfilename=|DataDirectory|\LibrarySystem.mdf;integrated security=True;connect timeout=30;MultipleActiveResultSets=True;App=EntityFramework&amp;quot;" providerName="System.Data.EntityClient" /&gt;
&lt;/connectionStrings&gt;
</code></pre>

<p>Строка подключения была создана автоматически. Если запускать мой проект с такой вот строкой подключения, то возникает исключение в программе:</p>

<p>Внутреннее исключение 1:
SqlException: An attempt to attach an auto-named database for file C:\Users\Cuurjol\Desktop\123\BACKUP LIBRARY\Library\Library\bin\Debug\LibrarySystem.mdf failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share.</p>

<p>Я в интернете долго искал решение этой проблемы, нашёл, нужно вместо attachdbfilename=|DataDirectory|\LibrarySystem.mdf писать целиком весь путь к файлу, ну например так:</p>

<pre><code>attachdbfilename=C:\Users\Cuurjol\Desktop\123\BACKUP LIBRARY\Library\Library\LibrarySystem.mdf
</code></pre>

<p>Но я так не хочу писать путь, поскольку папка с проектом может быть располагаться где угодно, а мне нужно как-то в App.config написать так, чтобы всегда было подключение к БД вне зависимости от расположения самого проекта на жёстком диске.</p>

<p>Как это можно сделать? И почему всё-таки сгенерированная строка подключения к БД не работает при запуске проекта?</p>
