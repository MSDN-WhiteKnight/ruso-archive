---
title: "Невозможно сделать реактивацию окна посредством Winapi - SetForegroundWindow"
se.owner.user_id: 18910
se.owner.display_name: "ilw"
se.owner.link: "https://ru.stackoverflow.com/users/18910/ilw"
se.link: "https://ru.stackoverflow.com/questions/999794/%d0%9d%d0%b5%d0%b2%d0%be%d0%b7%d0%bc%d0%be%d0%b6%d0%bd%d0%be-%d1%81%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c-%d1%80%d0%b5%d0%b0%d0%ba%d1%82%d0%b8%d0%b2%d0%b0%d1%86%d0%b8%d1%8e-%d0%be%d0%ba%d0%bd%d0%b0-%d0%bf%d0%be%d1%81%d1%80%d0%b5%d0%b4%d1%81%d1%82%d0%b2%d0%be%d0%bc-winapi-setforegroundwindow"
se.question_id: 999794
se.post_type: question
se.score: 1
---
<pre><code>int main() {

    HWND hWnd = FindWindow(NULL, "Безымянный — Блокнот");    
    if (!hWnd) ExitProcess(1);

    for (int i = 0; i &lt; 2; ++i) {
        SetForegroundWindow(hWnd);
        Sleep(2000);
    }


    ExitProcess(0);
}
</code></pre>

<p>При первом шаге цикла <code>notepad</code> активируется нормально.
Потом я делаю дективацию нотепада вручную (альт таб на какое то другое окно (<strong>не консольное</strong>, если запуск даного приложения происходит из консоли)).
Но на втором шаге <code>notepad</code> не активируется, а мигает в трее коричневым.
<a href="https://i.stack.imgur.com/dUgnH.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/dUgnH.png" alt="введите сюда описание изображения"></a>
Как сделать реактивацию возможной?</p>

<p><strong>Update</strong>:
Прочтя ответы и доп. инфу попробовал сделать вот так. </p>

<pre><code>int main(int argc, char **argv) {

    if (argc &gt; 1) {
        HWND hWnd = FindWindow(NULL, "Безымянный — Блокнот");
        if (!hWnd) ExitProcess(1);
        SetForegroundWindow(hWnd);
        ExitProcess(10);
    }

    std::string app(argv[0]);
    app.append(" 1");
    for (int i = 0; i &lt; 2; ++i) {
        system(app.c_str());
        Sleep(2000);
    }

    ExitProcess(0);
 }
</code></pre>

<p>И ведь задуманное работает! Неужели нельзя найти обходной путь и заставить работать все это в одном процессе. :(
Ведь с костылем все равно работает так или иначе.</p>
