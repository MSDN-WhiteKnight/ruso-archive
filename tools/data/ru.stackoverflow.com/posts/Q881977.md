---
title: "Инициализация в духе массива"
se.owner.user_id: 248572
se.owner.display_name: "Kir_Antipov"
se.owner.link: "https://ru.stackoverflow.com/users/248572/kir-antipov"
se.link: "https://ru.stackoverflow.com/questions/881977/%d0%98%d0%bd%d0%b8%d1%86%d0%b8%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%b2-%d0%b4%d1%83%d1%85%d0%b5-%d0%bc%d0%b0%d1%81%d1%81%d0%b8%d0%b2%d0%b0"
se.question_id: 881977
se.post_type: question
se.score: 2
---
<p>Пишу <code>array-like</code> класс, так что хотелось бы, чтобы процесс инициализации экземпляра моего класса был максимально приближен к привычной инициализации массивов </p>

<p>Право есть такая загвоздка:<br>
Мы можем установить значения массива сразу, в фигурных скобках:</p>

<pre><code>int[] a = new int[] { 1, 2, 3 };
</code></pre>

<p>Чтобы реализовать подобное поведение в пользовательском классе, необходимо реализовать метод <code>Add</code>, тогда такой код:</p>

<pre><code>MyClass my = new MyClass() { 1, 2, 3 };
</code></pre>

<p>Будет на деле развернут в </p>

<pre><code>MyClass my = new MyClass();
my.Add(1);
my.Add(2);
my.Add(3);
</code></pre>

<p>Но, как я уже сказал, для этого потребуется делать <strong>публичный</strong> метод <code>Add</code>, чего хотелось бы избежать, так как он не соотносится с логикой класса </p>

<hr>

<p>Пока что вижу один вариант решения проблемы: </p>

<p>Создать метод <code>Add</code>, но добавить к нему атрибут <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.componentmodel.browsableattribute?redirectedfrom=MSDN" rel="nofollow noreferrer">BrowsableAttribute(false)</a>, чтобы простые пользователи по крайней мере не видели его в списке доступных </p>

<p>Однако, возможно, есть более элегантное решение, о наличии которого я бы и хотел спросить у вас</p>
