---
title: "Answer 782384"
se.owner.user_id: 240512
se.owner.display_name: "MSDN.WhiteKnight"
se.owner.link: "https://ru.stackoverflow.com/users/240512/msdn-whiteknight"
se.answer_id: 782384
se.question_id: 782030
se.post_type: answer
se.score: 3
se.is_accepted: True
---
<h1>Механизм появления такой ошибки</h1>

<p>Сообщение "<em>This application has requested the Runtime to terminate it in an unusual way</em>" выводится, когда:</p>

<ul>
<li>в приложении С++ возникло необработанное исключение</li>
<li>версия стандартной библиотеки Visual C++ - 2010 или ниже</li>
<li>приложение собрано с использованием отладочной версии стандартной библиотеки</li>
</ul>

<p>Если версия стандартной библиотеки Visual C++ - 2012 или более новая, вместо этого будет выведено другое сообщение, чуть более осмысленное ("<em>abort() has been called</em>" - см. ниже) и позволяющее по нажатию кнопки <strong>Retry</strong> активировать just-in-time отладчик, если он установлен в системе.</p>

<p>Если приложение собрано с использованием релизной версии стандартной библиотеки, вместо этого выведется сообщение с предложением отправить отчет в Microsoft, а также в системный журнал будет занесено событие Application Error. Если установлен just-in-time отладчик, он, скорее всего, активируется автоматически и предложит выполнить отладку.</p>

<hr>

<p>Может показаться странным, почему выводится такое малоинформативное сообщение. Это связано с принятым в С++ механизмом обработки исключений. Если исключение не обработано ни одним обработчиком в пользовательском коде, будет вызван специальный аварийный обработчик. Он имеет такой прототип:</p>

<pre><code>void terminate(void);
</code></pre>

<p>Как видно, в него не передается вообще никаких параметров об ошибке, поэтому вывести информативное сообщение невозможно. Реализация этого обработчика по умолчанию просто вызывает функцию <a href="https://msdn.microsoft.com/en-us/library/k089yyh0(v=vs.110).aspx" rel="nofollow noreferrer">abort</a>. Эта функция и выводит сообщение об ошибке (в отладочном режиме), вызывает сигнал SIGABRT (который позволяет отладчику включится в работу), а затем завершает работу приложения. Этот обработчик можно переопределить вызовом <code>set_terminate</code>, но обычно толку от этого нет. </p>

<p>Подробнее: <a href="https://msdn.microsoft.com/en-us/library/ac9f67ah.aspx" rel="nofollow noreferrer">Unhandled C++ Exceptions</a></p>

<hr>

<p><strong>Примечание.</strong> Эта ошибка почти никогда не связана с отсутствием каких-то библиотек. При отсутствии библиотек, слинкованных через LIB-файл, обычно выводится что-то вроде "<em>Не удалось запустить приложение, потому что оно некорректно настроено</em>".</p>

<h1>Как отладить такую ошибку</h1>

<p>Обычно ответ прост - обрабатывать все исключения и выводить на экран и/или в лог подробную информацию об ошибке (можно также логировать и весь ход работы программы, чтобы было проще определить, на каком этапе возникла проблема). В случае данного вопроса, этого было достаточно.</p>

<p>Однако, иногда могут возникнуть более сложные ситуации. Что, если программа падает с загадочной ошибкой глубоко внутри функции сторонней библиотеки, от которой нет исходников? Тогда понадобится использовать отладчик - стандартный из студии или WinDBG. Для получения максимального эффекта от отладчика нужно:</p>

<ul>
<li>Подложить файлы символов (*.pdb) ко всем модулям, для которых они есть</li>
<li>Настроить отладчик на использование серверов символов Microsoft (там лежат символы от стандартной библиотеки и библиотек ОС)</li>
<li>Включить автоматическую остановку на исключениях </li>
</ul>

<p>Это позволит извлечь какую-то информацию из кода ошибки, места ее возникновения и стека вызовов в этот момент.</p>

<p><strong>Ссылки:</strong> </p>

<p><a href="https://msdn.microsoft.com/en-us/library/k70yt3e2.aspx" rel="nofollow noreferrer">Debugging Native Code</a></p>

<p><a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/" rel="nofollow noreferrer">Документация WinDBG</a></p>
