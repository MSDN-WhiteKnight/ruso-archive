---
title: "Answer 923427"
se.owner.user_id: 192421
se.owner.display_name: "pepsicoca1"
se.owner.link: "https://ru.stackoverflow.com/users/192421/pepsicoca1"
se.answer_id: 923427
se.question_id: 923326
se.post_type: answer
se.score: 0
se.is_accepted: False
---
<blockquote>
  <p>Мой основной вопрос состоит в том что, возможно ли во время работы
  программы как-то( с помощью любых средств ) узнавать где находится
  переменная,хотя бы засечь момент когда она переносится в файл
  подкачки.</p>
</blockquote>

<p>Вопрос интересный. Надо смотреть WinAPI есть ли там какие-нибудь функции на эту тему. Думаю что таких функций нет, поэтому скорее всего для винды невозможно узнать, выгружена ли данная переменная на диск или болтается в памяти. Кстати, чтобы это узнать, надо еще анализировать карту загрузки и листинг. То есть WinAPI функция (буде такая бы и была) должна была бы в качестве параметров принимать не только имя переменной но и карту загрузки и листинг программы. </p>

<p>Думаю, что для линукса такой функции тоже нет. По тем же причинам - никто не будет парсить листинг и карту загрузки в поисках имени, да и формат листинга и карты загрузки не стандартизован. Конечно, в мире линукса есть много затейников. Может быть кто-то и написал нашлепку к ядру, которая отслеживает что-то подобное хотя бы в целях отладки.</p>

<blockquote>
  <p>А также у меня вопрос. Правильно ли я понимаю, что файл подкачки
  используется только когда не хватает места в оперативной памяти или
  если есть долго не использующиеся переменные?</p>
</blockquote>

<p>Теоретически файл подкачки используется, когда не хватает места в оперативной памяти. Практически алгоритм файла подкачки на винде закрыт, поэтому ничего об нем сказать нельзя. Для Линукса алгоритм, конечно, известен матерым линуксоидам.</p>

<p>Кстати, коллега nick_n_a подкинул свежую идею. Если отключить файл подкачки, то все переменные будут сидеть в памяти. :-)</p>

<p>UPD1:</p>

<p>Кстати, да. Есть же еще переменные на стеке. Интересно, а страница стека выгружается в файл подкачки? В любом случае непонятно, если пользователь запросил имя стековой переменной, а эта переменная в данный момент не существует, что должна возвращать WinAPI функция? А может эта стековая переменная и вообще никогда не будет создана в текущем запуске программы?</p>

<p>Вобщем, вопрос довольно странный.</p>

<p>UPD2:</p>

<p>А еще есть такой вариант, что переменная (например структура) имеет размер бОльший, чем страница памяти. Тогда возможен случай, что часть переменной выгружена на диск, а часть нет. Как в этом случае нужно рассматривать переменную - как выгруженную или как не выгруженную? Или если переменная не большая, но лежит на границе страниц.</p>

<p>UPD3:</p>

<p>А еще есть такой вариант, что переменная расположена в куче и опять же непонятно, была она создана или нет в данный момент работы программы и будет ли вообще когда-нибудь создана в этом запуске программы. Вобщем, видимо Вам преподаватель дал такое задание просто чтобы вы подумали над проблемой. Потому, похоже, что технически эта проблема "в общем виде" не решается.</p>

<p>UPD4:</p>

<blockquote>
  <p>Я понял что нужно получить память занимаемую процессом программы в
  которой находится переменная. Но дело в том что я не понимаю как на
  c++ это можно реализовать.</p>
</blockquote>

<p>Sergesama Channel, Вы не стирайте старый вопрос. Просто дописывайте уточнения. Потому что "норот" отвечал на Ваш старый вопрос, Вы его изменили и все ответы выглядят немного шизофренично. :-)</p>

<p>Что касается получения памяти процесса, то мне вспоминается, что на винде это можно получить (выгрузить на диск в двоичном виде). Не знаю уж как это соотносится с безопасностью, но вроде бы такая функция в WinAPI была (но точно не скажу, надо смотреть). Но даже если Вы получили образ памяти процесса, то все равно непонятно, какие страницы в данный момент выгружены на диск, а какие нет.</p>
