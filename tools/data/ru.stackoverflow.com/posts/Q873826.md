---
title: "Убрать задержку при отправке почты в приложении WInForms"
se.owner.user_id: 298412
se.owner.display_name: "Aqua"
se.owner.link: "https://ru.stackoverflow.com/users/298412/aqua"
se.link: "https://ru.stackoverflow.com/questions/873826/%d0%a3%d0%b1%d1%80%d0%b0%d1%82%d1%8c-%d0%b7%d0%b0%d0%b4%d0%b5%d1%80%d0%b6%d0%ba%d1%83-%d0%bf%d1%80%d0%b8-%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b5-%d0%bf%d0%be%d1%87%d1%82%d1%8b-%d0%b2-%d0%bf%d1%80%d0%b8%d0%bb%d0%be%d0%b6%d0%b5%d0%bd%d0%b8%d0%b8-winforms"
se.question_id: 873826
se.post_type: question
se.score: 2
---
<p>У меня в приложении есть окно отправки оценки на почту. И при нажатии кнопки <code>Send</code> приложение грузится секунд 20, а потом сообщение с успехом. Можно ли как-то убрать вот ту задержку в виде 20 секунд?</p>

<pre><code>private void SendMail()
{
    string fromUser = richTextBox1.Text;
    int mark = trackBar1.Value;
    string uemail = textBox1.Text;
    try
    {
        MailAddress from = new MailAddress(uemail);
        MailAddress to = new MailAddress("vgolovatyukx@gmail.com");
        MailMessage m = new MailMessage(from, to);
        m.Subject = "Твое приложение оценили!";
        m.IsBodyHtml = false;
        m.Body = "Your mark is " + mark + "\n" + fromUser;
        SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587)
        {
            Credentials = new NetworkCredential("vgolovatyukx@gmail.com", "_________"),
            EnableSsl = true
        };
        smtp.Send(m);
        MessageBox.Show("Сообщение успешно отправлено. Спасибо!");
        Close();
    }
    catch (FormatException)
    {
        MessageBox.Show("Неверный формат электронной почты. Почта должна иметь окончания - @gmail/yandex/mail/bk/list и другие");
        textBox1.Text = "";
    }
    catch (ArgumentException)
    {
        MessageBox.Show("Строка с адресом не должна быть пуста");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.HelpLink);
    }
} 
</code></pre>
