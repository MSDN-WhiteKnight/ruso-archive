---
title: "Не отрабатывает событие нового кадра NewFrame Aforge"
se.owner.user_id: 225774
se.owner.display_name: "Roman Ieromenko"
se.owner.link: "https://ru.stackoverflow.com/users/225774/roman-ieromenko"
se.link: "https://ru.stackoverflow.com/questions/753484/%d0%9d%d0%b5-%d0%be%d1%82%d1%80%d0%b0%d0%b1%d0%b0%d1%82%d1%8b%d0%b2%d0%b0%d0%b5%d1%82-%d1%81%d0%be%d0%b1%d1%8b%d1%82%d0%b8%d0%b5-%d0%bd%d0%be%d0%b2%d0%be%d0%b3%d0%be-%d0%ba%d0%b0%d0%b4%d1%80%d0%b0-newframe-aforge"
se.question_id: 753484
se.post_type: question
se.score: 2
---
<p>Я сильно запутался. WinForms, использую библиотеку Afforge, их пространства имен - AForge.Video, AForge.Video.DirectShow, AForge.Controls и т. д. Используем control VideoSourcePlayer из библиотеки «Controls.dll». Ниже код:</p>

<pre><code>private void buttonVideo_Click(object sender, EventArgs e)
{
    //ourTimer.Enabled = true;
    //ourTimer.Start();
    //ourTimer.Interval = 1000 * checkedListBoxMedia.Items.Count * 12 * 3 / 25;
    progressBar1.Value = 0;
    progressBar1.Maximum = 100 * checkedListBoxMedia.Items.Count;
    progressBar1.Step = 25;
    //progressThread.Start();
    //ourTimer.Tick += new System.EventHandler(timer_Tick);           
    OpenVideoSource(medialist);
}
</code></pre>

<p>Далее:</p>

<pre><code>/ Open video source
private async void OpenVideoSource(List&lt;FileVideoSource&gt; source)
{
    // set busy cursor            
    this.Cursor = Cursors.WaitCursor;
    // start new video source
    videoNumber = 0;
    // Establish timer settings.
    System.Threading.Timer t = new System.Threading.Timer(
      timeCB,     // The TimerCallback delegate type.
      "Added a pgogress",       // Any info to pass into the called method (null for no info).
      0,          // Amount of time to wait before starting.
      2800);      // Interval of time between calls (in milliseconds).
    foreach (IVideoSource iv in source)
    {
        videoNumber++;
        //int x1 = 1;
        await VideoDisplay(iv);

    }

}

private async Task VideoDisplay(IVideoSource iv)
{
    await Task.Run(() =&gt;
    {                
        Invoke((MethodInvoker)
               delegate
               {
                   videoSourcePlayer.VideoSource = iv;                           
                   videoSourcePlayer.Start();                           
               });
    });
    //!!!12000
    Thread.Sleep(7000);
}
</code></pre>

<p>В конструкторе формы был установлен обработчик:</p>

<pre><code>public Form1()
{            
    this.videoSourcePlayer.NewFrame += new AForge.Controls.VideoSourcePlayer.NewFrameHandler(this.videoSourcePlayer_NewFrame);
    frameNumber = 0;           

}
</code></pre>

<p>Однако при запуске VideoSourcePlayer this.videoSourcePlayer.NewFrame - это событие не обрабатывается. Пожалуйста помогите. спасибо</p>
