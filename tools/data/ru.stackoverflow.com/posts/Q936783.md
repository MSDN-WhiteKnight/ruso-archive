---
title: "AnyCpu и ссылка на разные библиотеки в атрибуте DllImport"
se.owner.user_id: 206435
se.owner.display_name: "ヒミコ"
se.owner.link: "https://ru.stackoverflow.com/users/206435/%e3%83%92%e3%83%9f%e3%82%b3"
se.link: "https://ru.stackoverflow.com/questions/936783/anycpu-%d0%b8-%d1%81%d1%81%d1%8b%d0%bb%d0%ba%d0%b0-%d0%bd%d0%b0-%d1%80%d0%b0%d0%b7%d0%bd%d1%8b%d0%b5-%d0%b1%d0%b8%d0%b1%d0%bb%d0%b8%d0%be%d1%82%d0%b5%d0%ba%d0%b8-%d0%b2-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b5-dllimport"
se.question_id: 936783
se.post_type: question
se.score: 3
---
<p>Может ли проект с архитектурой AnyCpu брать разные библиотеки в зависимости от размера указателя? Т.е. что-то вроде такого:</p>

<pre><code>internal class SdlFunctions
{
    private const string DllNameX64 = "x64\\sdl2.dll";
    private const string DllNameX86 = "x86\\sdl2.dll";

    #region SDL_video.h

    /// &lt;summary&gt;
    /// Get the number of video drivers compiled into SDL.
    /// &lt;/summary&gt;
    [DllImport(DllNameX86, CallingConvention = CallingConvention.Cdecl)]
    internal static extern int SDL_GetNumVideoDrivers();

    [DllImport(Is64Bit ? DllNameX86 : DllNameX64, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
    internal static extern IntPtr SDL_CreateWindow();

    #endregion

    private static bool Is64Bit =&gt; IntPtr.Size != 4;
}
</code></pre>

<p>Но так сделать не выйдет, т.к. в атрибут <code>DllImport</code> нужно передавать константу.</p>

<p>Есть ли что-то другое кроме как использование <code>(Load\Free)Library</code>?</p>
