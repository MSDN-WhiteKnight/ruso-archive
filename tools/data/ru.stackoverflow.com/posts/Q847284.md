---
title: "Метод для запроса информации из базы на C#"
se.owner.user_id: 245329
se.owner.display_name: "Andrey Sherman"
se.owner.link: "https://ru.stackoverflow.com/users/245329/andrey-sherman"
se.link: "https://ru.stackoverflow.com/questions/847284/%d0%9c%d0%b5%d1%82%d0%be%d0%b4-%d0%b4%d0%bb%d1%8f-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%b8%d0%bd%d1%84%d0%be%d1%80%d0%bc%d0%b0%d1%86%d0%b8%d0%b8-%d0%b8%d0%b7-%d0%b1%d0%b0%d0%b7%d1%8b-%d0%bd%d0%b0-c"
se.question_id: 847284
se.post_type: question
se.score: 1
---
<p>Есть у меня программа, которой я могу подключаться к БД SQL, запускать процедуру на SQL сервере с параметрами, и получать ответ. Ответ это обычно список из одного столбца и нескольких строк.</p>

<pre><code>string ConString = "Server=servname;Database=DB;Trusted_Connection=True;"; //строка подключения к БД с использованием Windows авторизации
        using (SqlConnection connection = new SqlConnection(ConString))
        {
            using (SqlCommand command = connection.CreateCommand())
            {
                command.CommandText = string.Format(@"DECLARE   @return_value int
EXEC    @return_value = [dbo].[Match] 
    @FN_Client = N'{0}',
    @LN_Client = N'{1}',
    @MN_Сlient = N'{2}' 
", fn, sn, mn);//текст запроса
                connection.Open();
                SqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {

                        Console.WriteLine(reader[0].ToString());
                }

                return;
            }
        }
</code></pre>

<p>Хочу создать класс, и метод, чтобы не плодить много кода. Подскажите пожалуйста, как можно засунуть в метод мой код, чтобы на выходе получить список?</p>
