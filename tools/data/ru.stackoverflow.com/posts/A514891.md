---
title: "Answer 514891"
se.owner.user_id: 232
se.owner.display_name: "avp"
se.owner.link: "https://ru.stackoverflow.com/users/232/avp"
se.answer_id: 514891
se.question_id: 513736
se.post_type: answer
se.score: 3
se.is_accepted: False
---
<p>Хоть и не приветствуются ответы только из ссылок, но вот нашел хороший материал (в т.ч. там код проверок, вызовет ли переполнение (более обще -- безопасно ли) сложение, вычитание, умножение и деление целых):</p>

<p><a href="https://www.securecoding.cert.org/confluence/display/c/INT32-C.+Ensure+that+operations+on+signed+integers+do+not+result+in+overflow" rel="nofollow">https://www.securecoding.cert.org/confluence/display/c/INT32-C.+Ensure+that+operations+on+signed+integers+do+not+result+in+overflow</a></p>

<p>с обсуждениями и т.п. </p>

<p><strong>Update</strong></p>

<p>Поскольку при поиске ответа всегда хочется сразу увидеть конкретный код, помогающий в решении задачи (а не гадать, например, как правильно написать  условие проверки для вычитания, уже зная правильный ответ для сложения), приведу тут некоторые из материалов по этой ссылке, которые можно использовать как образцы  для своих программ.</p>

<p><strong>Проверка перед сложением:</strong></p>

<pre><code>#include &lt;limits.h&gt;

void f(signed int si_a, signed int si_b) {
  signed int sum;
  if (((si_b &gt; 0) &amp;&amp; (si_a &gt; (INT_MAX - si_b))) ||
      ((si_b &lt; 0) &amp;&amp; (si_a &lt; (INT_MIN - si_b)))) {
    /* Handle error */
  } else {
    sum = si_a + si_b;
  }
  /* ... */
}
</code></pre>

<p><strong>Проверка перед вычитанием:</strong></p>

<pre><code>#include &lt;limits.h&gt;

void func(signed int si_a, signed int si_b) {
  signed int diff;
  if ((si_b &gt; 0 &amp;&amp; si_a &lt; INT_MIN + si_b) ||
      (si_b &lt; 0 &amp;&amp; si_a &gt; INT_MAX + si_b)) {
    /* Handle error */
  } else {
    diff = si_a - si_b;
  }

  /* ... */
}
</code></pre>

<p><strong>Проверка перед умножением:</strong></p>

<pre><code>#include &lt;limits.h&gt;

void func(signed int si_a, signed int si_b) {
  signed int result; 
  if (si_a &gt; 0) {  /* si_a is positive */
    if (si_b &gt; 0) {  /* si_a and si_b are positive */
      if (si_a &gt; (INT_MAX / si_b)) {
        /* Handle error */
      }
    } else { /* si_a positive, si_b nonpositive */
      if (si_b &lt; (INT_MIN / si_a)) {
        /* Handle error */
      }
    } /* si_a positive, si_b nonpositive */
  } else { /* si_a is nonpositive */
    if (si_b &gt; 0) { /* si_a is nonpositive, si_b is positive */
      if (si_a &lt; (INT_MIN / si_b)) {
        /* Handle error */
      }
    } else { /* si_a and si_b are nonpositive */
      if ( (si_a != 0) &amp;&amp; (si_b &lt; (INT_MAX / si_a))) {
        /* Handle error */
      }
    } /* End if si_a and si_b are nonpositive */
  } /* End if si_a is nonpositive */

  result = si_a * si_b;
}
</code></pre>

<p><strong>Проверка перед делением:</strong><br>
(или вычислением остатка)</p>

<pre><code>#include &lt;limits.h&gt;

void func(signed long s_a, signed long s_b) {
  signed long result;
  if ((s_b == 0) || ((s_a == LONG_MIN) &amp;&amp; (s_b == -1))) {
    /* Handle error */
  } else {
    result = s_a / s_b;
  }
  /* ... */
}
</code></pre>

<p>Ну, если кому не лень вытащить оттуда остальной (относящийся к вопросу ТС) код (а также описание всех существенных моментов) сюда и аккуратно его оформить, милости просим.</p>
