---
title: "Какой функцией можно получить указатель на устройство из PDEV_BROADCAST_HDR по dbcc_name"
se.owner.user_id: 295151
se.owner.display_name: "Naydachi Kamikadze"
se.owner.link: "https://ru.stackoverflow.com/users/295151/naydachi-kamikadze"
se.link: "https://ru.stackoverflow.com/questions/945051/%d0%9a%d0%b0%d0%ba%d0%be%d0%b9-%d1%84%d1%83%d0%bd%d0%ba%d1%86%d0%b8%d0%b5%d0%b9-%d0%bc%d0%be%d0%b6%d0%bd%d0%be-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b8%d1%82%d1%8c-%d1%83%d0%ba%d0%b0%d0%b7%d0%b0%d1%82%d0%b5%d0%bb%d1%8c-%d0%bd%d0%b0-%d1%83%d1%81%d1%82%d1%80%d0%be%d0%b9%d1%81%d1%82%d0%b2%d0%be-%d0%b8%d0%b7-pdev-broadcast-hdr-%d0%bf%d0%be-d"
se.question_id: 945051
se.post_type: question
se.score: 1
---
<p>Как вариант я могу перечислять все устройства получать их DEVICE_ID и сравнивать со своим dbcc_name(но это какие-то грабли). Возможно существует функция которая сразу вернёт указатель на устройство приняв входным параметром dbcc_name??? Чтобы получить например DEVINST именно этого устройства. </p>

<pre><code>LRESULT CALLBACK WndProc(HWND hWnd, UINT uiMsg, WPARAM wParam, LPARAM lParam)
{
    if (DBT_DEVICEARRIVAL == wParam || DBT_DEVICEREMOVECOMPLETE == wParam)
    {
        PDEV_BROADCAST_HDR lpdb = (PDEV_BROADCAST_HDR)lParam;

        if (lpdb-&gt;dbch_devicetype == DBT_DEVTYP_DEVICEINTERFACE)
        {
            PDEV_BROADCAST_DEVICEINTERFACE lpdbd = (PDEV_BROADCAST_DEVICEINTERFACE)lpdb;
            lpdbd-&gt;dbcc_name;// \\?\USB#Vid_04e8&amp;Pid_503b# 0002F9A9828E0F06#{a5dcbf10-6530-11d2-901f-00c04fb951ed}
        }
    }
    return DefWindowProc(hWnd, uiMsg, wParam, lParam);
}
</code></pre>
