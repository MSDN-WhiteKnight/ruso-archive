{"tags":["c#",".net","pinvoke"],"owner":{"reputation":4994,"user_id":206435,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/aff8ab0e5f74d01facde887535318d53?s=128&d=identicon&r=PG","display_name":"ヒミコ","link":"https://ru.stackoverflow.com/users/206435/%e3%83%92%e3%83%9f%e3%82%b3"},"is_answered":true,"view_count":50,"accepted_answer_id":936879,"answer_count":1,"score":3,"last_activity_date":1548488012,"creation_date":1548443302,"last_edit_date":1548488012,"question_id":936783,"link":"https://ru.stackoverflow.com/questions/936783/anycpu-%d0%b8-%d1%81%d1%81%d1%8b%d0%bb%d0%ba%d0%b0-%d0%bd%d0%b0-%d1%80%d0%b0%d0%b7%d0%bd%d1%8b%d0%b5-%d0%b1%d0%b8%d0%b1%d0%bb%d0%b8%d0%be%d1%82%d0%b5%d0%ba%d0%b8-%d0%b2-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b5-dllimport","title":"AnyCpu и ссылка на разные библиотеки в атрибуте DllImport","body":"<p>Может ли проект с архитектурой AnyCpu брать разные библиотеки в зависимости от размера указателя? Т.е. что-то вроде такого:</p>\n\n<pre><code>internal class SdlFunctions\n{\n    private const string DllNameX64 = \"x64\\\\sdl2.dll\";\n    private const string DllNameX86 = \"x86\\\\sdl2.dll\";\n\n    #region SDL_video.h\n\n    /// &lt;summary&gt;\n    /// Get the number of video drivers compiled into SDL.\n    /// &lt;/summary&gt;\n    [DllImport(DllNameX86, CallingConvention = CallingConvention.Cdecl)]\n    internal static extern int SDL_GetNumVideoDrivers();\n\n    [DllImport(Is64Bit ? DllNameX86 : DllNameX64, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]\n    internal static extern IntPtr SDL_CreateWindow();\n\n    #endregion\n\n    private static bool Is64Bit =&gt; IntPtr.Size != 4;\n}\n</code></pre>\n\n<p>Но так сделать не выйдет, т.к. в атрибут <code>DllImport</code> нужно передавать константу.</p>\n\n<p>Есть ли что-то другое кроме как использование <code>(Load\\Free)Library</code>?</p>\n"}