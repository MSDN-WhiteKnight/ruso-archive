{"tags":["c","windows","кодировка","locale"],"owner":{"user_type":"does_not_exist","display_name":"user294535"},"is_answered":true,"view_count":145,"answer_count":1,"score":-2,"last_activity_date":1538294444,"creation_date":1538043071,"last_edit_date":1538049184,"question_id":886176,"link":"https://ru.stackoverflow.com/questions/886176/%d0%a7%d1%82%d0%be-%d0%b4%d0%b5%d0%bb%d0%b0%d0%b5%d1%82-setlocale-c-c","title":"Что делает setlocale()? C/C++","body":"<p>Мне нужно перевести строку из <strong>cp1251</strong> в <strong>Unicode</strong>. Для этого я использую <code>MutliByteToWideChar(1251, ...)</code>.</p>\n\n<p>Странность заключается в том, что если не сделать:</p>\n\n<pre><code>setlocate(LC_ALL, \"rus\");\n</code></pre>\n\n<p>То символы с кодами <strong>[128-255]</strong> переводятся неверно. Да, я знаю, что <strong>setlocale()</strong> задает используемую локаль... Но я не понимаю, какая тут связь с функцией конвертации, которой явно указали, что входная строка находится в <strong>cp1251</strong>.</p>\n"}