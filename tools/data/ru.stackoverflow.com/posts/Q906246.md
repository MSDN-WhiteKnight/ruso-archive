---
title: "Как деинсталляторы удаляют директории, в которых они находятся?"
se.owner.user_id: 292257
se.owner.display_name: "J. Huxley"
se.owner.link: "https://ru.stackoverflow.com/users/292257/j-huxley"
se.link: "https://ru.stackoverflow.com/questions/906246/%d0%9a%d0%b0%d0%ba-%d0%b4%d0%b5%d0%b8%d0%bd%d1%81%d1%82%d0%b0%d0%bb%d0%bb%d1%8f%d1%82%d0%be%d1%80%d1%8b-%d1%83%d0%b4%d0%b0%d0%bb%d1%8f%d1%8e%d1%82-%d0%b4%d0%b8%d1%80%d0%b5%d0%ba%d1%82%d0%be%d1%80%d0%b8%d0%b8-%d0%b2-%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d1%85-%d0%be%d0%bd%d0%b8-%d0%bd%d0%b0%d1%85%d0%be%d0%b4%d1%8f%d1%82%d1%81%d1%8f"
se.question_id: 906246
se.post_type: question
se.score: 6
---
<p>Я вот вижу (по своему реестру), что все деинсталяторы лежат в папках, которые они удаляют. Но если попробовать сделать <code>thisDir.Delete(true /*recursively*/)</code>, то вылетит exception <code>Access to the path 'uninstaller.exe' is denied</code>. Ведь нельзя удалить файл, который выполняется. Есть вариант, что uninstaller может создать исполняемый файл (tmpUninstaller.exe) в какой-то временной директории, запустить его, tmpUninstaller.exe ждёт когда завершится оригинальный uninstaller,  зачищает всё и самоудаляется. Но, как по мне, это костыльный вариант решения поставленной задачи. Как же всё-таки uninstaller удаляет директорию в которой он находится?</p>
