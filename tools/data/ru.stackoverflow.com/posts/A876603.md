---
title: "Answer 876603"
se.owner.user_id: 240512
se.owner.display_name: "MSDN.WhiteKnight"
se.owner.link: "https://ru.stackoverflow.com/users/240512/msdn-whiteknight"
se.answer_id: 876603
se.question_id: 876538
se.post_type: answer
se.score: 2
se.is_accepted: True
---
<blockquote>
  <p>Вычищаю сборку из памяти. По крайней мере, я хочу в это верить</p>
</blockquote>

<p>Увы, эта вера не имеет оснований. Использованный вами способ загрузки сборки не только не позволяет выгрузить сборку из памяти без выгрузки всего домена приложений, но и при каждом повторном запуске будет грузить сборку с того же пути  заново (иными словами, это хороший способ исчерпать память при длительной работе программы). </p>

<p>Создайте <code>Dictionary &lt;string, Assembly&gt;</code> (где string будет путем к файлу) и кэшируйте все загружаемые сборки в нем. Можно использовать вместо пути CRC/хэш файла, если вам нужно как-то учесть само содержимое файла. Или грузить каждую сборку в новый домен приложений, тогда их можно будет выгрузить (вообще, это обычная практика при создании приложений с расширениями).</p>
