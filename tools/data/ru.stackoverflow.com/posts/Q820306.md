---
title: "Отменяет ли регистрацию класса окна PostQuitMessage"
se.owner.user_id: 206435
se.owner.display_name: "ヒミコ"
se.owner.link: "https://ru.stackoverflow.com/users/206435/%e3%83%92%e3%83%9f%e3%82%b3"
se.link: "https://ru.stackoverflow.com/questions/820306/%d0%9e%d1%82%d0%bc%d0%b5%d0%bd%d1%8f%d0%b5%d1%82-%d0%bb%d0%b8-%d1%80%d0%b5%d0%b3%d0%b8%d1%81%d1%82%d1%80%d0%b0%d1%86%d0%b8%d1%8e-%d0%ba%d0%bb%d0%b0%d1%81%d1%81%d0%b0-%d0%be%d0%ba%d0%bd%d0%b0-postquitmessage"
se.question_id: 820306
se.post_type: question
se.score: 2
---
<p>Когда мое приложение стартует, <code>RegisterClassEx</code> иногда возвращает <code>0</code>, и приложение приходится аварийно завершать. Это происходит не по тому ли что иногда класс окна не уничтожается, а остается в памяти менеджера окон? Нужно ли мне вызывать <code>UnregisterClass</code> вручную после получения сообщения <code>WM_DESTROY</code> и вызова <code>PostQuitMessage</code>?</p>

<p>Еще приведу цитату с одного из сайтов по <code>winapi</code>:</p>

<blockquote>
  <p>Регистрация всех классов окон, которые зарегистрировало приложение,
  должна быть отменена при его завершении.</p>
</blockquote>

<p>От чего появляется мнение что программист обязан отменять регистрацию классов окон независимо от обстоятельств.</p>
