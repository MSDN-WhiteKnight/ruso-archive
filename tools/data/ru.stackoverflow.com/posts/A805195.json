{"owner":{"reputation":16058,"user_id":240512,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ew6lG.png?s=128&g=1","display_name":"MSDN.WhiteKnight","link":"https://ru.stackoverflow.com/users/240512/msdn-whiteknight"},"is_accepted":false,"score":1,"last_activity_date":1522138486,"last_edit_date":1522138486,"creation_date":1522128388,"answer_id":805195,"question_id":804324,"body":"<p>Пример по ссылке рассказывает о кодировках при работе с консолью, файлы - совершенно отдельная песня. Считать UTF8-файл в Visual C++ проще всего, я думаю, с помощью функции <em>fopen</em> (используя <a href=\"https://msdn.microsoft.com/en-us/library/yeby3zcb.aspx#Anchor_3\" rel=\"nofollow noreferrer\">параметр ccs</a> для указания кодировки).</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;io.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;    \n\nusing namespace std;\n\nint wmain(int argc, wchar_t **argv)\n{\n    _setmode(_fileno(stdout), _O_U16TEXT);     \n\n    wchar_t buf[500]=L\"\";\n    FILE *fp = fopen(\"input.txt\", \"rt+, ccs=UTF-8\");\n    fgetws(buf,500,fp);\n    fclose(fp);\n\n    wstring line(buf);\n    wcout &lt;&lt; line &lt;&lt; endl;\n    getchar();\n    return 0;\n}\n</code></pre>\n"}