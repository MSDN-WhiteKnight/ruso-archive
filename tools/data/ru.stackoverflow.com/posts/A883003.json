{"owner":{"reputation":16058,"user_id":240512,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ew6lG.png?s=128&g=1","display_name":"MSDN.WhiteKnight","link":"https://ru.stackoverflow.com/users/240512/msdn-whiteknight"},"is_accepted":true,"score":1,"last_activity_date":1537342807,"creation_date":1537342807,"answer_id":883003,"question_id":882822,"body":"<p>Если нет никаких ограничений на то, в какой мере путь может пересекать или накладываться на себя, случайный путь - это просто набор случайных точек. Напишем код для заполнения линии между двумя точками:</p>\n\n<pre><code>public class Map\n{\n    int[,] cells;\n\n    public Map(int size)\n    {\n        cells = new int[size, size];                \n    }\n\n    //заполнение прямой между двумя точками заданным числом\n    public void FillLine(int x1, int y1, int x2, int y2, int value)\n    {\n\n        int x = x1, y = y1;\n        int dx = Math.Sign(x2 - x1); //приращение по X\n        int dy = Math.Sign(y2 - y1); //приращение по Y\n        bool direction_y = false;\n\n        while (true)\n        {\n            cells[x, y] = value;                    \n\n            if (x == x2 &amp;&amp; y == y2) break; //достигнута конечная точка\n\n            //сделаем по очереди приращение по X или Y\n            if (direction_y)\n            {\n                if (y != y2) y += dy;\n            }\n            else\n            {\n                if (x != x2) x += dx;\n            }\n            direction_y = !direction_y;\n\n        }\n\n    }\n\n    public override string ToString()\n    {\n        StringBuilder sb = new StringBuilder(500);\n\n        for (int y = 0; y &lt; cells.GetLength(0); y++)\n        {\n            for (int x = 0; x &lt; cells.GetLength(0); x++)\n            {\n                sb.AppendFormat(\"{0} \",cells[x,y].ToString().PadLeft(2));\n\n            }\n            sb.AppendLine();\n        }\n        return sb.ToString();\n    }\n}\n</code></pre>\n\n<p>Тогда заполнение случайного пути будет выглядеть так:</p>\n\n<pre><code>const int SIZE = 30; \nconst int N = 4; \n\nMap m = new Map(SIZE);\nRandom rnd = new Random();            \nint x0=0,y0=0,x, y;\nint value = 1;\n\n//проходим через N случайных точек\nfor (int i = 0; i &lt; N; i++)\n{\n    x = rnd.Next(SIZE-1);\n    y = rnd.Next(SIZE-1);\n    m.FillLine(x0, y0, x, y,value);\n    x0 = x;\n    y0 = y;\n}\n\n//заходим в конец\nx = SIZE - 1;\ny = SIZE - 1;\nm.FillLine(x0, y0, x, y, value);\n</code></pre>\n"}