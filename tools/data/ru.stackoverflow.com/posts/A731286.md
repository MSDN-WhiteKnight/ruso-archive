---
title: "Answer 731286"
se.owner.user_id: 208074
se.owner.display_name: "Arhad-the-dev"
se.owner.link: "https://ru.stackoverflow.com/users/208074/arhad-the-dev"
se.answer_id: 731286
se.question_id: 727567
se.post_type: answer
se.score: 1
se.is_accepted: False
---
<p>Наилучший результат как при уменьшении, так и при увеличении дают <em>свёрточные фильтры</em>.</p>

<p>При их использовании уменьшение изображения очень похоже на наивное уменьшение, когда мы просто выбираем пиксели с определённым интервалом. Но чтобы не появилась некрасивая рябь, фильтр берёт не просто пиксели, а взвешенную сумму всех соседей на некотором расстоянии от этого пикселя:</p>

<p><img src="https://i.stack.imgur.com/CHUst.png" alt="введите сюда описание изображения"></p>

<p><em>Матрица — это представление ядра свёртки в виде таблицы дискретных значений. В данном случае показан расчёт нового цвета для левого верхнего пикселя на основании цвета его непосредственных соседей.</em></p>

<p><em><sup>Источник изображения: <a href="https://habrahabr.ru/post/142818/" rel="nofollow noreferrer">https://habrahabr.ru/post/142818/</a></sup></em></p>

<p>Для того, чтобы найти коэффициенты взвешенной суммы, воспользуемся <em>фильтром Ланцоша</em>. Он не даёт муара, а также повышает контраст изображения, делая границы чётче (что особо важно для относительно мелкого текста, читаемость которого необходимо сохранить).</p>

<p><em>Мы бы могли вычислить эту таблицу самостоятельно (ради чего весь текст выше и затевался), но так как я немного запутался и в формулах, и в <a href="https://sourcecodebrowser.com/gimp/2.6.1/scale-region_8c.html#aa45d148f4f263e46a3f1fdbdb1967710" rel="nofollow noreferrer">GIMP-овом генераторе таблицы коэффициентов</a>, предлагаю-таки воспользоваться готовой библиотекой.</em></p>



<p>Соответственно, вам подойдёт любая библиотека, работающая с этим фильтром. Вот несколько примеров:</p>

<ul>
<li><a href="https://github.com/avaneev/avir" rel="nofollow noreferrer">avir</a>,</li>
<li><a href="https://github.com/jsummers/fpresize" rel="nofollow noreferrer">fpresize</a>.</li>
</ul>

<p><em>Примечание: все эти библиотеки работают с изображением в оперативной, не видеопамяти. Соответственно применять их надо после загрузки из файла и перед отправкой в объект текстуры</em>.</p>
