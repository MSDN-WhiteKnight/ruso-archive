---
title: "Размещение C# на сервере"
se.owner.user_id: 251438
se.owner.display_name: "Tekerin"
se.owner.link: "https://ru.stackoverflow.com/users/251438/tekerin"
se.link: "https://ru.stackoverflow.com/questions/669902/%d0%a0%d0%b0%d0%b7%d0%bc%d0%b5%d1%89%d0%b5%d0%bd%d0%b8%d0%b5-c-%d0%bd%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5"
se.question_id: 669902
se.post_type: question
se.score: 0
---
<p>Создаю бота для вк, который меняет название группы при помощи C# ASP.NET MVC. Но он работает только при обновлении страницы, а мне нужно чтобы он работал без контакта пользователей, и как мне сделать, чтобы название менялось каждый раз по принципу: "Если название группы не равняется этому, то сменить на это". Подскажите как реализовать. И да, еще один вопрос, можно ли обойтись без C# ASP.NET MVC?</p>

<p>Код:</p>

<pre><code>protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        TimerCallback tm = new TimerCallback(Bot);
        Timer timer = new Timer(tm, 0, 0, 2000);
    }

    public static void Bot(object obj)
    {
        string url = "https://api.vk.com/method/messages.getChat?access_token=TOKEN&amp;chat_id=1";

        WebClient webClient = new WebClient();
        var response = webClient.DownloadString(url);
        var json = Encoding.UTF8.GetString(Encoding.GetEncoding(1251).GetBytes(response));
        JObject j = JObject.Parse(json);

        string title = (string)j["response"]["title"];
        int users = j["response"]["users"].Count();

        string name = "Тест, нас " + users;

        if (title != name)
        {
            url = "https://api.vk.com/method/messages.editChat?access_token=TOKEN&amp;chat_id=1&amp;title=" + name;
            webClient = new WebClient();
            response = webClient.DownloadString(url);
        }
    }
</code></pre>
