{"tags":["c#",".net","mp3","wav","naudio"],"owner":{"reputation":787,"user_id":229072,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/Zvg74.jpg?s=128&g=1","display_name":"JDo","link":"https://ru.stackoverflow.com/users/229072/jdo"},"is_answered":true,"view_count":64,"accepted_answer_id":952615,"answer_count":1,"score":1,"last_activity_date":1551787185,"creation_date":1551784500,"question_id":952591,"link":"https://ru.stackoverflow.com/questions/952591/%d0%92%d1%8b%d0%b2%d0%be%d0%b4-%d0%be%d0%b1%d1%89%d0%b5%d0%b3%d0%be-%d0%b2%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%b8-%d1%82%d1%80%d0%b5%d0%ba%d0%b0-naudio-c","title":"Вывод общего времени трека NAudio C#","body":"<p>Необходимо выводить время треков. Получается сделать, если например только mp3. Но в плейлисте могут быть и другие форматы, например WAV и Vorbis. Как можно реализовать автоматическое переключение между типами для вывода времени для любых из двух типов файлов.\nСейчас сделал следующим образом:</p>\n\n<pre><code>private static void Main(string[] args)\n    {\n        try\n        {\n            foreach (var file in GetFileInfo())\n            {\n                Mp3FileReader reader = new Mp3FileReader(file.FullName);\n                WaveFileReader s; //??\n\n                TimeSpan duration = reader.TotalTime;\n                Console.WriteLine(duration);\n            }\n        }\n        catch (Exception e)\n        {\n            Console.WriteLine(e);\n        }\n\n        Console.ReadKey();\n    }\n\n    public static IList&lt;FileInfo&gt; GetFileInfo()\n    {\n        DirectoryInfo directories = new DirectoryInfo(\"D:\\\\TestAudio\");\n        var extensions = new string[] { \"*.mp3\", \"*.mp4\", \"*.wav\", \"*.wma\", \"*.ogg\", \"*.spx\" };\n        var files = extensions.SelectMany(ext =&gt; directories.GetFiles(ext, SearchOption.AllDirectories));\n\n        return files.ToList();\n    }\n</code></pre>\n\n<p>Когда доходит до WAV файлов соответственно выводит исключение.</p>\n\n<p><a href=\"https://i.stack.imgur.com/CgjrV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CgjrV.png\" alt=\"введите сюда описание изображения\"></a></p>\n"}