{"tags":["c#"],"owner":{"reputation":4498,"user_id":248572,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/52azV.png?s=128&g=1","display_name":"Kir_Antipov","link":"https://ru.stackoverflow.com/users/248572/kir-antipov"},"is_answered":true,"view_count":78,"accepted_answer_id":882506,"answer_count":1,"score":2,"last_activity_date":1537239800,"creation_date":1537116450,"question_id":881977,"link":"https://ru.stackoverflow.com/questions/881977/%d0%98%d0%bd%d0%b8%d1%86%d0%b8%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%b2-%d0%b4%d1%83%d1%85%d0%b5-%d0%bc%d0%b0%d1%81%d1%81%d0%b8%d0%b2%d0%b0","title":"Инициализация в духе массива","body":"<p>Пишу <code>array-like</code> класс, так что хотелось бы, чтобы процесс инициализации экземпляра моего класса был максимально приближен к привычной инициализации массивов </p>\n\n<p>Право есть такая загвоздка:<br>\nМы можем установить значения массива сразу, в фигурных скобках:</p>\n\n<pre><code>int[] a = new int[] { 1, 2, 3 };\n</code></pre>\n\n<p>Чтобы реализовать подобное поведение в пользовательском классе, необходимо реализовать метод <code>Add</code>, тогда такой код:</p>\n\n<pre><code>MyClass my = new MyClass() { 1, 2, 3 };\n</code></pre>\n\n<p>Будет на деле развернут в </p>\n\n<pre><code>MyClass my = new MyClass();\nmy.Add(1);\nmy.Add(2);\nmy.Add(3);\n</code></pre>\n\n<p>Но, как я уже сказал, для этого потребуется делать <strong>публичный</strong> метод <code>Add</code>, чего хотелось бы избежать, так как он не соотносится с логикой класса </p>\n\n<hr>\n\n<p>Пока что вижу один вариант решения проблемы: </p>\n\n<p>Создать метод <code>Add</code>, но добавить к нему атрибут <a href=\"https://docs.microsoft.com/ru-ru/dotnet/api/system.componentmodel.browsableattribute?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">BrowsableAttribute(false)</a>, чтобы простые пользователи по крайней мере не видели его в списке доступных </p>\n\n<p>Однако, возможно, есть более элегантное решение, о наличии которого я бы и хотел спросить у вас</p>\n"}