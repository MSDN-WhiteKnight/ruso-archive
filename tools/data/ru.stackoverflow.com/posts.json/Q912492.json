{"tags":["dll","gcc","codeblocks"],"owner":{"reputation":9048,"user_id":285,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/027b8ae972c5d2680a6fb472f5b57117?s=128&d=identicon&r=PG","display_name":"Modus","link":"https://ru.stackoverflow.com/users/285/modus"},"is_answered":true,"view_count":115,"answer_count":1,"score":1,"last_activity_date":1543375946,"creation_date":1543357011,"question_id":912492,"link":"https://ru.stackoverflow.com/questions/912492/%d0%97%d0%b0%d1%87%d0%b5%d0%bc-%d0%bd%d1%83%d0%b6%d0%b5%d0%bd-%d1%84%d0%b0%d0%b9%d0%bb-a-lib-%d0%b4%d0%bb%d1%8f-%d0%bf%d0%be%d0%b4%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d1%8f-dll","title":"Зачем нужен файл .a / .lib для подключения dll?","body":"<p>Для сборки программы, к которой статически прилинкована .dll, оказалось достаточно такой команды:</p>\n\n<pre><code>$(CC) bin\\main.o -L.\\bin -lcompare -o program.exe\n</code></pre>\n\n<p>При этом на момент сборки в папке <code>bin</code> должна лежать <code>compare.dll</code>. Но если я то же самое делаю из CodeBlocks, то чтобы статически слинковать dll, мне необходимо добавить в параметры линкера файл <code>compare.a</code>, который получается при сборке .dll. Почему среде разработки недостаточно просто .dll, если голый компилятор это проглатывает?</p>\n\n<p>Кроме того, мне попадался вот такой пример команды сборки dll:</p>\n\n<pre><code>gcc -shared -o tst.dll -Wl,--out-implib,libtstdll.a dllfct.o\n</code></pre>\n\n<p>Я так понимаю, эта команда, помимо dll, генерирует файл <code>libtstdll.a</code>. Зачем это делается через -Wl? Мы же и так просто линкуем файлы, <code>dllfct.o</code> ведь уже собран? Правильно ли я понимаю, что файл <code>libtstdll.a</code> после этого можно просто прилинковать к программе безо всяких <code>-lmyldll</code>?</p>\n"}