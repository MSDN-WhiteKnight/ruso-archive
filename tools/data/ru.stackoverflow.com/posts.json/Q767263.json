{"tags":["c#",".net","winforms","реестр"],"owner":{"reputation":515,"user_id":236603,"user_type":"registered","accept_rate":63,"profile_image":"https://graph.facebook.com/701092130065288/picture?type=large","display_name":"Vitokhv","link":"https://ru.stackoverflow.com/users/236603/vitokhv"},"is_answered":true,"view_count":254,"accepted_answer_id":769179,"answer_count":2,"score":1,"last_activity_date":1515647275,"creation_date":1515237149,"last_edit_date":1515266734,"question_id":767263,"link":"https://ru.stackoverflow.com/questions/767263/%d0%9a%d0%b0%d0%ba-%d0%be%d1%82%d0%ba%d1%80%d1%8b%d1%82%d1%8c-%d1%84%d0%b0%d0%b9%d0%bb-%d1%81-%d0%bf%d0%be%d0%bc%d0%be%d1%89%d1%8c%d1%8e-%d0%ba%d0%be%d0%bc%d0%b0%d0%bd%d0%b4%d1%8b-%d0%bf%d1%80%d0%b8%d0%bb%d0%be%d0%b6%d0%b5%d0%bd%d0%b8%d1%8f","title":"Как открыть файл с помощью команды приложения?","body":"<p>Как открыть файл, чтобы он запускался через приложение? При условии, что реестр использует обязательный путь к приложению:</p>\n\n<p><code>HKEY_CLASSES_ROOT\\exefile\\shell\\open\\command</code>\n<a href=\"https://i.stack.imgur.com/11MBq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11MBq.png\" alt=\"введите сюда описание изображения\"></a>\n<a href=\"https://i.stack.imgur.com/4Tbic.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Tbic.png\" alt=\"введите сюда описание изображения\"></a></p>\n\n<p>Задача состоит в том, чтобы через приложение \"А\" передать параметры запуска <code>\"%1\" %*</code> любому файлу, который принудительно станет запускаться через это приложение \"А\".</p>\n\n<p>Допустим, мы переносим файл на приложение, или запускаем его двойным кликом по файлу, приложение получает от файла аргументы в виде пути к файлу, если первое условие пропускается, файл \"В\" должен получить от приложения \"А\" аргументы запуска <code>\"%1\" %*</code>и запуститься.</p>\n\n<pre><code>static void Main(string[] args)\n{\n    if (args.Any() &amp;&amp; BlockChecker.IsBlocked(args[0]) == true)\n    {\n        Application.EnableVisualStyles();\n        Application.SetCompatibleTextRenderingDefault(false);\n        Application.Run(new Form1());\n    }\n    else if (args.Any())\n    {\n        ProcessStartInfo psi = new ProcessStartInfo((args[0]), @\"%1 %*\");\n        psi.WindowStyle = ProcessWindowStyle.Normal;\n        psi.RedirectStandardOutput = true;\n        psi.UseShellExecute = false;\n        psi.CreateNoWindow = true;\n        Process.Start(psi);\n        Application.Exit();\n    }\n}\n</code></pre>\n\n<p>Вышеупомянутый код работает, но не может принимать аргументы от ярлыков, все еще есть ошибки при запуске программ (Discord) и (браузер Opera) т.к. они используют ярлык с аргументами запуска: <code>C:\\Users\\User\\AppData\\Local\\Discord\\Update.exe --processStart Discord.exe</code></p>\n\n<p>Эта проблема относится ко всем ярлыкам или программам с параметрами запуска...</p>\n\n<p>Подробнее о классе BlockChecker.cs: <a href=\"https://ru.stackoverflow.com/questions/765571\">#url</a></p>\n"}