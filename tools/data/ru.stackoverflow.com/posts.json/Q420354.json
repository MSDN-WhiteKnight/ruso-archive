{"tags":["c#","html",".net","регулярные-выражения","синтаксический-анализ"],"owner":{"reputation":28844,"user_id":176051,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/mXEYl.png?s=128&g=1","display_name":"Kyubey","link":"https://ru.stackoverflow.com/users/176051/kyubey"},"is_answered":true,"view_count":49396,"accepted_answer_id":420355,"answer_count":6,"score":97,"last_activity_date":1549773120,"creation_date":1430472763,"last_edit_date":1496559628,"question_id":420354,"link":"https://ru.stackoverflow.com/questions/420354/%d0%9a%d0%b0%d0%ba-%d1%80%d0%b0%d1%81%d0%bf%d0%b0%d1%80%d1%81%d0%b8%d1%82%d1%8c-html-%d0%b2-net","title":"Как распарсить HTML в .NET?","body":"<p>Необходимо извлечь все URL из атрибутов <code>href</code> тегов <code>a</code> в HTML странице. Я попробовал воспользоваться регулярными выражениями:</p>\n\n<pre><code>Uri uri = new Uri(\"http://google.com/search?q=test\");\nRegex reHref = new Regex(@\"&lt;a[^&gt;]+href=\"\"([^\"\"]+)\"\"[^&gt;]+&gt;\");\nstring html = new WebClient().DownloadString(uri);\nforeach (Match match in reHref.Matches(html))\n    Console.WriteLine(match.Groups[1].ToString());\n</code></pre>\n\n<p>Но возникает множество потенциальных проблем:</p>\n\n<ul>\n<li>Как отфильтровать только специфические ссылки, например, по CSS классу?</li>\n<li>Что будет, если кавычки у атрибута другие?</li>\n<li>Что будет, если вокруг знака равенства пробелы?</li>\n<li>Что будет, если кусок страницы закомментирован?</li>\n<li>Что будет, если попадётся кусок JavaScript?</li>\n<li>И так далее.</li>\n</ul>\n\n<p>Регулярное выражение очень быстро становится монструозным и нечитаемыми, а проблемных мест обнаруживается всё больше и больше.</p>\n\n<p>Что делать?</p>\n"}