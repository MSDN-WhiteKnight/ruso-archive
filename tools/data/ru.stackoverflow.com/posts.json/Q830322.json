{"tags":["c++"],"owner":{"reputation":62,"user_id":277283,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-19O2q5-Mjtw/AAAAAAAAAAI/AAAAAAAAAt0/AByhgLQFSJA/photo.jpg?sz=128","display_name":"stasuk25","link":"https://ru.stackoverflow.com/users/277283/stasuk25"},"is_answered":false,"view_count":99,"answer_count":1,"score":1,"last_activity_date":1526896191,"creation_date":1526750412,"question_id":830322,"link":"https://ru.stackoverflow.com/questions/830322/%d0%98%d0%bd%d1%8a%d0%b5%d0%ba%d1%86%d0%b8%d1%8f-dll-%d0%b2-%d1%81%d0%b2%d0%be%d0%b9-%d0%bf%d1%80%d0%be%d1%86%d0%b5%d1%81%d1%81-c","title":"Инъекция DLL в свой процесс C++","body":"<p>Учу С++. Интересен способ инъекции DLL в свой процесс.\nНашёл библиотеку <a href=\"https://codepad.remoteinterview.io/GXCSXVMKOM\" rel=\"nofollow noreferrer\" title=\"SourceCode\">смотреть на codepad</a>, делает Inject в сторонний процесс, посредством вызова CreateProcess</p>\n\n<pre><code> CreateProcessW(NULL, Path, NULL, NULL, FALSE, CREATE_DEFAULT_ERROR_MODE | CREATE_SUSPENDED, NULL, NULL, &amp;si, &amp;pi);\n if (ok)\n            {\n                DbgPrint(\"CreateProcessW ok, %d\", pi.dwProcessId);\n                ok = (NO_ERROR == AcInjectDll(&amp;pi, CREATE_SUSPENDED, TRUE));\n                //AcInjectDll(&amp;pi, CREATE_SUSPENDED, TRUE);\n                DbgPrint(\"AcInjectDll %s\", ok ? \"ok\" : \"FAIL\");\n                CloseHandle(pi.hThread);\n                CloseHandle(pi.hProcess);\n            }\n            else\n                DbgPrint(\"CreateProcessW FAIL\");\n</code></pre>\n\n<p>Но, функция после отработки отдает fail. Конечно, при этом никакой DLL'ки не прогрузилось, а поток остался зависшим у вызываемого процесса.</p>\n\n<p>Где может быть ошибка? За ранее спасибо!</p>\n"}