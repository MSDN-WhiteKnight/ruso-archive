{"tags":["c#",".net","com"],"owner":{"reputation":4994,"user_id":206435,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/aff8ab0e5f74d01facde887535318d53?s=128&d=identicon&r=PG","display_name":"ヒミコ","link":"https://ru.stackoverflow.com/users/206435/%e3%83%92%e3%83%9f%e3%82%b3"},"is_answered":true,"view_count":50,"accepted_answer_id":916655,"answer_count":1,"score":2,"last_activity_date":1544153076,"creation_date":1544111432,"question_id":916459,"link":"https://ru.stackoverflow.com/questions/916459/%d0%9d%d0%b5%d1%8f%d1%81%d0%bd%d0%be%d0%b5-%d0%bf%d0%be%d0%b2%d0%b5%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b0-optionalattribute","title":"Неясное поведение атрибута OptionalAttribute","body":"<p>Для начала приведу простой пример кода:</p>\n\n<pre><code>int CopyFromBitmap\n(\n#if UNI\n    [In, Optional] Point2U *destPoint,\n    [In, MarshalAs(UnmanagedType.IUnknown)] object bitmapObject,\n    [In, Optional] RectU *srcRect\n#else\n    [In, Optional] ref Point2U destPoint,\n    [In, MarshalAs(UnmanagedType.IUnknown)] object bitmapObject,\n    [In, Optional] ref RectU srcRect\n#endif\n);\n</code></pre>\n\n<p>Каким образом необязательный параметр, идет перед обязательным но, при этом ничего не сообщается, ни ошибок, ни предупреждений.</p>\n\n<p>Выходной код выглядит так:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aCYCy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aCYCy.png\" alt=\"Странное определение\"></a></p>\n\n<p>Как такое вообще возможно?</p>\n"}