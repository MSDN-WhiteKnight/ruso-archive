{"tags":["c++","c","winapi"],"owner":{"reputation":2330,"user_id":243717,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/ad5c6f0e980273f94a0e95c0a804866d?s=128&d=identicon&r=PG&f=1","display_name":"Range","link":"https://ru.stackoverflow.com/users/243717/range"},"is_answered":true,"view_count":34,"accepted_answer_id":926391,"answer_count":1,"score":2,"last_activity_date":1545974047,"creation_date":1545933492,"question_id":926273,"link":"https://ru.stackoverflow.com/questions/926273/%d0%9f%d0%be%d0%bb%d1%83%d1%87%d0%b8%d1%82%d1%8c-%d0%bf%d1%80%d0%b0%d0%b2%d0%b0-%d0%bf%d0%b0%d0%bf%d0%ba%d0%b8-%d1%83-%d0%ba%d0%be%d0%bd%d0%ba%d1%80%d0%b5%d1%82%d0%bd%d0%be%d0%b3%d0%be-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f","title":"Получить права папки у конкретного пользователя","body":"<p>Как можно получить права доступа у конкретного пользователя к конкретной папке: Права:</p>\n\n<ul>\n<li>R - read</li>\n<li>W - write</li>\n<li>C - change</li>\n<li>FC - full control</li>\n<li>RW - read and write</li>\n<li>L - list(просмотр папок)</li>\n<li>RO - read only</li>\n</ul>\n\n<p>Пока дошёл до этого, но не понимаю, какие биты получать из переменной типа <em>ACCESS_MASK</em>:</p>\n\n<pre><code>HANDLE result = CreateFile(LR\"(C:\\Users\\admin_test\\Desktop\\test\\)\", GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, NULL);\nif (result != INVALID_HANDLE_VALUE)\n    std::cout &lt;&lt; \"OK\" &lt;&lt; std::endl;\nelse\n    std::cout &lt;&lt; \"ERROR\" &lt;&lt; std::endl;\n\nPSID pSidOwner = NULL;\nPSECURITY_DESCRIPTOR pSD = NULL;\nPACL ppDacl = NULL;\n\nSECURITY_INFORMATION ssi = DACL_SECURITY_INFORMATION;\nGetSecurityInfo(result, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, &amp;pSidOwner,\n    NULL,\n    &amp;ppDacl,\n    NULL,\n    &amp;pSD);\n\nTRUSTEE trust;\nBuildTrusteeWithName(&amp;trust, LPWSTR(L\"admin_test\"));\nACCESS_MASK rights = 0;\nauto err = GetEffectiveRightsFromAcl(ppDacl, &amp;trust, &amp;rights);\n</code></pre>\n"}