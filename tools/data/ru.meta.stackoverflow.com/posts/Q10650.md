---
title: "выводятся -5-6 вместо элементов массива (то есть результата умножения). В чем моя ошибка?. ( Тема Умножение длинных чисел)"
se.owner.user_id: 381015
se.owner.display_name: "green321"
se.owner.link: "https://ru.meta.stackoverflow.com/users/381015/green321"
se.link: "https://ru.meta.stackoverflow.com/questions/10650/%d0%b2%d1%8b%d0%b2%d0%be%d0%b4%d1%8f%d1%82%d1%81%d1%8f-5-6-%d0%b2%d0%bc%d0%b5%d1%81%d1%82%d0%be-%d1%8d%d0%bb%d0%b5%d0%bc%d0%b5%d0%bd%d1%82%d0%be%d0%b2-%d0%bc%d0%b0%d1%81%d1%81%d0%b8%d0%b2%d0%b0-%d1%82%d0%be-%d0%b5%d1%81%d1%82%d1%8c-%d1%80%d0%b5%d0%b7%d1%83%d0%bb%d1%8c%d1%82%d0%b0%d1%82%d0%b0-%d1%83%d0%bc%d0%bd%d0%be%d0%b6%d0%b5%d0%bd%d0%b8%d1%8f-%d0%92-%d1%87%d0%b5%d0%bc-%d0%bc%d0%be"
se.question_id: 10650
se.post_type: question
se.score: -1
---
<pre><code>#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stack&gt;
using namespace std;
#define usi unsigned short int
FILE* source;
void read(int* z, int max) {
    char* h = new char[max];
    cin &gt;&gt; h;
    z[0] = strlen(h) - 1;
    for (usi i = strlen(h), j = 0; i &gt;= 1 &amp;&amp; j &lt; strlen(h); i--, j++) {
        z[i] = h[j] - '0';
    }
}
void write(int* z, int chsize) {
    for (usi i = chsize - 1; i &gt;= 1; i--) {
        cout &lt;&lt; z[i];
    }
}
int multp(int* f, int* m, int* r) {
    for (usi i = 1; i &lt;= f[0]; i++) {
        for (usi j = 1; j &lt;= m[0]; j++) {
            r[i + j - 1] += f[i] * m[j];
        }
    }
    for (usi i = 1; i &lt; r[0]; i++) {
        r[i + 1] += (r[i] / 10);
        r[i] %= 10;
    }
    while(r[r[0] - 1] == 0) {
        r[0]--;
    }
    return r[0];
}//write the max size of 'r' array in r[0]
//multp func. returns the  REAL size of 'r' array
int main() {
    freopen_s(&amp;source, &quot;input.txt&quot;, &quot;r&quot;, stdin);
    freopen_s(&amp;source, &quot;output.txt&quot;, &quot;w&quot;, stdout);
    int a[106], b[6], rs;
    read(a, 106);
    read(b, 6);
    int nr = b[0] + a[0] + 2;
    int* rq = new int [nr];
    rq[0] = b[0] + a[0] + 1;
    rs = multp(a, b, rq);
    write(rq, rs);
    fclose(stdin);
    fclose(stdout);
    return 0;
}
</code></pre>
<p>я тестировал на коротких числах 15 и 21 именно при этих данных выводится (-5-6)</p>
